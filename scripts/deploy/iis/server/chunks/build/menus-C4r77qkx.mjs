import{defineComponent as e,ref as l,inject as t,computed as n,mergeProps as r,withCtx as a,unref as u,createVNode as s,createTextVNode as d,toDisplayString as i,resolveDynamicComponent as o,createBlock as c,openBlock as v,Fragment as f,renderList as m,createCommentVNode as g,withModifiers as p,useSSRContext as b}from"vue";import{ssrRenderAttrs as h,ssrRenderComponent as x,ssrInterpolate as _,ssrRenderList as y,ssrRenderClass as L,ssrRenderVNode as w,ssrRenderAttr as k,ssrIncludeBooleanAttr as I}from"vue/server-renderer";import{u as C,a as T}from"./useIcons-CU1xCIuG.mjs";import{_ as $}from"./PageHeader-B5d1DVEu.mjs";import{_ as j,a as M,b as H,c as P}from"./CardContent-B5Mf_SVJ.mjs";import{_ as D}from"./CardDescription-DMlSm5A1.mjs";import{_ as z}from"./Button-C4ZWmsC_.mjs";import{_ as A}from"./Input-CO0GwZS-.mjs";import{_ as S}from"./Label-DTP1ztuh.mjs";import{_ as N,a as E,b as O,c as B,d as K,e as q}from"./TableRow-ukuzC_Dy.mjs";import{_ as X}from"./Badge-DfRucjjx.mjs";import{u as Q}from"./server.mjs";import{P as R,a as Z}from"./plus-ZseF0iYE.mjs";import{R as V}from"./refresh-cw-Dq49VSBS.mjs";import{C as F}from"./chevron-right-Cq_K5LWB.mjs";import{T as G}from"./trash-2-Cb5c2PkA.mjs";import"./useAPI-Bps8bvAQ.mjs";import"./nuxt-link-DTyZRdIe.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";import"./utils-H80jjgLf.mjs";import"clsx";import"tailwind-merge";import"class-variance-authority";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";import"unhead/plugins";import"vue-router";import"./createLucideIcon-DpBqMQLu.mjs";const U=e({__name:"menus",__ssrInlineRender:!0,setup(e){Q({title:"Quản lý Menu - HNI Dashboard"});const b=l([]),U=l(!1),W=l(!1),J=l(!1),Y=l(""),ee=l(!1),le=l(!1),te=l(!1),ne=l(null),re=l(new Set),ae=t("refreshSidebar",()=>{}),triggerSidebarRefresh=()=>{ae(),localStorage.setItem("menus-updated",Date.now().toString())},hasChildren=e=>b.value.some(l=>l.ParentId===e),toggleMenuCollapse=e=>{re.value.has(e)?re.value.delete(e):re.value.add(e)},isMenuCollapsed=e=>re.value.has(e),isAnyParentCollapsed=e=>{if(!e.parent_id)return!1;const l=b.value.find(l=>l.id===e.parent_id);return!!l&&(!!isMenuCollapsed(l.id)||isAnyParentCollapsed(l))},ue=l({id:null,name:"",href:"",icon:"Menu",order:1,parent_id:null,level:1,is_active:!0}),{availableIcons:se,getIconComponent:de}=C(),removeDiacritics=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/đ/g,"d").replace(/Đ/g,"D"),ie=n(()=>{let e=b.value;if(Y.value){const l=Y.value.toLowerCase(),t=removeDiacritics(l),n=e.filter(e=>{const n=e.Name.toLowerCase(),r=removeDiacritics(n),a=e.Href.toLowerCase(),u=removeDiacritics(a);return n.includes(l)||r.includes(t)||a.includes(l)||u.includes(t)}),r=new Set;n.forEach(e=>{r.add(e.Id);const l=(e=>{const l=[];let t=e.ParentId;for(;t;){const e=b.value.find(e=>e.Id===t);if(!e)break;l.unshift(e),t=e.ParentId}return l})(e);l.forEach(e=>r.add(e.Id))}),e=e.filter(e=>r.has(e.Id))}return(e=>{const l=[],t=new Set,n=e.filter(e=>1===e.Level).sort((e,l)=>e.Order-l.Order),addMenuAndChildren=n=>{t.has(n.Id)||isAnyParentCollapsed(n)||(l.push(n),t.add(n.Id),isMenuCollapsed(n.Id))||e.filter(e=>e.ParentId===n.Id).sort((e,l)=>e.Order-l.Order).forEach(e=>addMenuAndChildren(e))};return n.forEach(e=>addMenuAndChildren(e)),e.forEach(e=>{t.has(e.Id)||isAnyParentCollapsed(e)||l.push(e)}),l})(e)}),oe=n(()=>b.value.filter(e=>e.Level<4)),getParentName=e=>{const l=b.value.find(l=>l.Id===e);return l?l.Name:"Không tìm thấy"},loadMenus=async()=>{try{U.value=!0;const{getMenus:e}=T(),l=await e();b.value=l||[]}catch(e){console.error("Error loading menus:",e)}finally{U.value=!1}},resetForm=()=>{ue.value={id:null,name:"",href:"",icon:"Menu",order:1,parent_id:null,level:1,is_active:!0}},updateParentAndLevel=e=>{if(ue.value.parent_id=e?parseInt(e):null,e){const l=b.value.find(l=>l.id===parseInt(e));ue.value.level=l?l.level+1:1}else ue.value.level=1},openCreateModal=()=>{te.value=!1,resetForm(),ee.value=!0},openEditModal=e=>{if(te.value=!0,ee.value=!0,ue.value.id=e.id,ue.value.name=e.name,ue.value.href=e.href,ue.value.icon=e.icon,ue.value.order=e.order,ue.value.parent_id=e.parent_id,ue.value.is_active=e.is_active,e.parent_id){const l=b.value.find(l=>l.id===e.parent_id);ue.value.level=l?l.level+1:1}else ue.value.level=1},closeModal=()=>{ee.value=!1,resetForm()},submitForm=async()=>{try{if(W.value=!0,te.value){const e={name:ue.value.name,href:ue.value.href,icon:ue.value.icon,order:ue.value.order,parent_id:ue.value.parent_id,level:ue.value.level,is_active:ue.value.is_active};(await $fetch(`/api/menus/${ue.value.id}`,{method:"PUT",body:e})).success&&(await loadMenus(),triggerSidebarRefresh(),closeModal())}else{const e={name:ue.value.name,href:ue.value.href,icon:ue.value.icon,order:ue.value.order,parent_id:ue.value.parent_id,level:ue.value.level,is_active:ue.value.is_active};(await $fetch("/api/menus",{method:"POST",body:e})).success&&(await loadMenus(),triggerSidebarRefresh(),closeModal())}}catch(e){console.error("Error saving menu:",e)}finally{W.value=!1}},confirmDelete=e=>{ne.value=e,le.value=!0},closeDeleteModal=()=>{le.value=!1,ne.value=null},deleteMenu=async()=>{if(ne.value)try{J.value=!0;(await $fetch(`/api/menus/${ne.value.id}`,{method:"DELETE"})).success&&(await loadMenus(),triggerSidebarRefresh(),closeDeleteModal())}catch(e){console.error("Error deleting menu:",e)}finally{J.value=!1}};return(e,l,t,n)=>{l(`<div${h(r({class:"h-full flex flex-col space-y-6"},n))}>`),l(x($,{title:"Quản lý Menu hệ thống",description:"Quản lý cấu trúc menu và điều hướng của hệ thống"},null,t)),l('<div class="flex items-center justify-between"><div class="flex items-center gap-4">'),l(x(z,{onClick:openCreateModal,class:"flex items-center gap-2"},{default:a((e,l,t,n)=>{if(!l)return[s(u(R),{class:"w-4 h-4"}),d(" Thêm menu mới ")];l(x(u(R),{class:"w-4 h-4"},null,t,n)),l(" Thêm menu mới ")}),_:1},t)),l(x(z,{variant:"outline",onClick:loadMenus,disabled:U.value},{default:a((e,l,t,n)=>{if(!l)return[s(u(V),{class:["w-4 h-4",{"animate-spin":U.value}]},null,8,["class"]),d(" Làm mới ")];l(x(u(V),{class:["w-4 h-4",{"animate-spin":U.value}]},null,t,n)),l(" Làm mới ")}),_:1},t)),l('</div><div class="flex items-center gap-2">'),l(x(A,{value:Y.value,onInput:e=>Y.value=e.target.value,placeholder:"Tìm kiếm menu...",class:"w-64"},null,t)),l("</div></div>"),l(x(j,null,{default:a((e,l,t,n)=>{if(!l)return[s(M,null,{default:a(()=>[s(H,null,{default:a(()=>[d("Danh sách Menu")]),_:1}),s(D,null,{default:a(()=>[d(" Tổng cộng "+i(ie.value.length)+" menu ",1)]),_:1})]),_:1}),s(P,null,{default:a(()=>[s("div",{class:"rounded-md border"},[s(N,null,{default:a(()=>[s(E,null,{default:a(()=>[s(O,null,{default:a(()=>[s(B,{class:"w-12"},{default:a(()=>[d("#")]),_:1}),s(B,null,{default:a(()=>[d("Tên menu")]),_:1}),s(B,null,{default:a(()=>[d("Đường dẫn")]),_:1}),s(B,null,{default:a(()=>[d("Menu cha")]),_:1}),s(B,null,{default:a(()=>[d("Thứ tự")]),_:1}),s(B,null,{default:a(()=>[d("Cấp")]),_:1}),s(B,null,{default:a(()=>[d("Trạng thái")]),_:1}),s(B,{class:"w-32"},{default:a(()=>[d("Thao tác")]),_:1})]),_:1})]),_:1}),s(K,null,{default:a(()=>[U.value?(v(),c(O,{key:0},{default:a(()=>[s(q,{colspan:"8",class:"text-center py-8"},{default:a(()=>[s("div",{class:"flex items-center justify-center gap-2"},[s(u(V),{class:"w-4 h-4 animate-spin"}),d(" Đang tải... ")])]),_:1})]),_:1})):0===ie.value.length?(v(),c(O,{key:1},{default:a(()=>[s(q,{colspan:"8",class:"text-center py-8 text-muted-foreground"},{default:a(()=>[d(" Không có menu nào ")]),_:1})]),_:1})):(v(!0),c(f,{key:2},m(ie.value,e=>(v(),c(O,{key:e.Id,class:{"bg-primary/5 border-l-4 border-l-primary":1===e.Level,"bg-blue-50/50 border-l-4 border-l-blue-500":2===e.Level,"bg-green-50/50 border-l-4 border-l-green-500":3===e.Level,"bg-orange-50/50 border-l-4 border-l-orange-500":e.Level>=4}},{default:a(()=>[s(q,{class:"font-medium"},{default:a(()=>[d(i(e.Id),1)]),_:2},1024),s(q,null,{default:a(()=>[s("div",{class:"flex items-center gap-2"},[s("div",{class:"flex items-center"},[(v(!0),c(f,null,m(e.Level-1,l=>(v(),c("div",{key:l,class:"w-4 h-4 flex items-center justify-center"},[l===e.Level-1?(v(),c("div",{key:0,class:"w-3 h-3 flex items-center justify-center"},[s("div",{class:"w-4 h-4 border-l-2 border-b-2 border-muted-foreground/60 rounded-bl-sm"})])):(v(),c("div",{key:1,class:"w-3 h-3 flex items-center justify-center"},[s("div",{class:"w-px h-3 bg-border"})]))]))),128))]),s("div",{class:["flex items-center justify-center rounded-md",1===e.Level?"w-8 h-8 bg-primary/10 border border-primary/20":2===e.Level?"w-6 h-6 bg-blue-50 border border-blue-200":3===e.Level?"w-6 h-6 bg-green-50 border border-green-200":"w-6 h-6 bg-orange-50 border border-orange-200"]},[(v(),c(o(u(de)(e.Icon)),{class:["w-4 h-4",1===e.Level?"text-primary":2===e.Level?"text-blue-600":3===e.Level?"text-green-600":"text-orange-600"]},null,8,["class"]))],2),hasChildren(e.Id)?(v(),c("button",{key:0,onClick:l=>toggleMenuCollapse(e.Id),class:"flex items-center justify-center w-4 h-4 rounded hover:bg-muted transition-colors cursor-pointer",title:isMenuCollapsed(e.Id)?"Mở rộng":"Thu gọn"},[s(u(F),{class:["w-3 h-3 transition-transform duration-200 text-muted-foreground",isMenuCollapsed(e.Id)?"rotate-0":"rotate-90"]},null,8,["class"])],8,["onClick","title"])):(v(),c("div",{key:1,class:"w-4 h-4"})),s("span",{class:{"font-semibold text-foreground":1===e.Level,"font-medium text-blue-700":2===e.Level,"text-green-700":3===e.Level,"text-orange-700":e.Level>=4}},i(e.Name),3)])]),_:2},1024),s(q,null,{default:a(()=>[s("code",{class:"text-xs bg-muted px-1 rounded"},i("#parent"===e.Href?"#":e.Href),1)]),_:2},1024),s(q,null,{default:a(()=>[e.ParentId?(v(),c("span",{key:0,class:"text-sm text-muted-foreground"},i(getParentName(e.ParentId)),1)):(v(),c("span",{key:1,class:"text-sm text-muted-foreground"},"-"))]),_:2},1024),s(q,null,{default:a(()=>[d(i(e.Order),1)]),_:2},1024),s(q,null,{default:a(()=>[s(X,{variant:1===e.Level||2===e.Level?"secondary":3===e.Level?"outline":"secondary",class:{"bg-red-100 text-red-800 font-medium":1===e.Level,"bg-blue-100 text-blue-800 font-medium":2===e.Level,"bg-green-100 text-green-800 font-medium":3===e.Level,"bg-orange-100 text-orange-800 font-medium":e.Level>=4}},{default:a(()=>[s("span",{class:{"text-red-800":1===e.Level,"text-blue-800":2===e.Level,"text-green-800":3===e.Level,"text-orange-800":e.Level>=4}}," Cấp "+i(e.Level),3)]),_:2},1032,["variant","class"])]),_:2},1024),s(q,null,{default:a(()=>[s(X,{variant:e.IsActive?"default":"destructive"},{default:a(()=>[d(i(e.IsActive?"Hoạt động":"Tạm dừng"),1)]),_:2},1032,["variant"])]),_:2},1024),s(q,null,{default:a(()=>[s("div",{class:"flex items-center gap-1"},[s(z,{variant:"ghost",size:"sm",onClick:l=>openEditModal(e)},{default:a(()=>[s(u(Z),{class:"w-4 h-4"})]),_:1},8,["onClick"]),s(z,{variant:"ghost",size:"sm",onClick:l=>confirmDelete(e),class:"text-destructive hover:text-destructive"},{default:a(()=>[s(u(G),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})])]),_:1})];l(x(M,null,{default:a((e,l,t,n)=>{if(!l)return[s(H,null,{default:a(()=>[d("Danh sách Menu")]),_:1}),s(D,null,{default:a(()=>[d(" Tổng cộng "+i(ie.value.length)+" menu ",1)]),_:1})];l(x(H,null,{default:a((e,l,t,n)=>{if(!l)return[d("Danh sách Menu")];l("Danh sách Menu")}),_:1},t,n)),l(x(D,null,{default:a((e,l,t,n)=>{if(!l)return[d(" Tổng cộng "+i(ie.value.length)+" menu ",1)];l(` Tổng cộng ${_(ie.value.length)} menu `)}),_:1},t,n))}),_:1},t,n)),l(x(P,null,{default:a((e,l,t,n)=>{if(!l)return[s("div",{class:"rounded-md border"},[s(N,null,{default:a(()=>[s(E,null,{default:a(()=>[s(O,null,{default:a(()=>[s(B,{class:"w-12"},{default:a(()=>[d("#")]),_:1}),s(B,null,{default:a(()=>[d("Tên menu")]),_:1}),s(B,null,{default:a(()=>[d("Đường dẫn")]),_:1}),s(B,null,{default:a(()=>[d("Menu cha")]),_:1}),s(B,null,{default:a(()=>[d("Thứ tự")]),_:1}),s(B,null,{default:a(()=>[d("Cấp")]),_:1}),s(B,null,{default:a(()=>[d("Trạng thái")]),_:1}),s(B,{class:"w-32"},{default:a(()=>[d("Thao tác")]),_:1})]),_:1})]),_:1}),s(K,null,{default:a(()=>[U.value?(v(),c(O,{key:0},{default:a(()=>[s(q,{colspan:"8",class:"text-center py-8"},{default:a(()=>[s("div",{class:"flex items-center justify-center gap-2"},[s(u(V),{class:"w-4 h-4 animate-spin"}),d(" Đang tải... ")])]),_:1})]),_:1})):0===ie.value.length?(v(),c(O,{key:1},{default:a(()=>[s(q,{colspan:"8",class:"text-center py-8 text-muted-foreground"},{default:a(()=>[d(" Không có menu nào ")]),_:1})]),_:1})):(v(!0),c(f,{key:2},m(ie.value,e=>(v(),c(O,{key:e.Id,class:{"bg-primary/5 border-l-4 border-l-primary":1===e.Level,"bg-blue-50/50 border-l-4 border-l-blue-500":2===e.Level,"bg-green-50/50 border-l-4 border-l-green-500":3===e.Level,"bg-orange-50/50 border-l-4 border-l-orange-500":e.Level>=4}},{default:a(()=>[s(q,{class:"font-medium"},{default:a(()=>[d(i(e.Id),1)]),_:2},1024),s(q,null,{default:a(()=>[s("div",{class:"flex items-center gap-2"},[s("div",{class:"flex items-center"},[(v(!0),c(f,null,m(e.Level-1,l=>(v(),c("div",{key:l,class:"w-4 h-4 flex items-center justify-center"},[l===e.Level-1?(v(),c("div",{key:0,class:"w-3 h-3 flex items-center justify-center"},[s("div",{class:"w-4 h-4 border-l-2 border-b-2 border-muted-foreground/60 rounded-bl-sm"})])):(v(),c("div",{key:1,class:"w-3 h-3 flex items-center justify-center"},[s("div",{class:"w-px h-3 bg-border"})]))]))),128))]),s("div",{class:["flex items-center justify-center rounded-md",1===e.Level?"w-8 h-8 bg-primary/10 border border-primary/20":2===e.Level?"w-6 h-6 bg-blue-50 border border-blue-200":3===e.Level?"w-6 h-6 bg-green-50 border border-green-200":"w-6 h-6 bg-orange-50 border border-orange-200"]},[(v(),c(o(u(de)(e.Icon)),{class:["w-4 h-4",1===e.Level?"text-primary":2===e.Level?"text-blue-600":3===e.Level?"text-green-600":"text-orange-600"]},null,8,["class"]))],2),hasChildren(e.Id)?(v(),c("button",{key:0,onClick:l=>toggleMenuCollapse(e.Id),class:"flex items-center justify-center w-4 h-4 rounded hover:bg-muted transition-colors cursor-pointer",title:isMenuCollapsed(e.Id)?"Mở rộng":"Thu gọn"},[s(u(F),{class:["w-3 h-3 transition-transform duration-200 text-muted-foreground",isMenuCollapsed(e.Id)?"rotate-0":"rotate-90"]},null,8,["class"])],8,["onClick","title"])):(v(),c("div",{key:1,class:"w-4 h-4"})),s("span",{class:{"font-semibold text-foreground":1===e.Level,"font-medium text-blue-700":2===e.Level,"text-green-700":3===e.Level,"text-orange-700":e.Level>=4}},i(e.Name),3)])]),_:2},1024),s(q,null,{default:a(()=>[s("code",{class:"text-xs bg-muted px-1 rounded"},i("#parent"===e.Href?"#":e.Href),1)]),_:2},1024),s(q,null,{default:a(()=>[e.ParentId?(v(),c("span",{key:0,class:"text-sm text-muted-foreground"},i(getParentName(e.ParentId)),1)):(v(),c("span",{key:1,class:"text-sm text-muted-foreground"},"-"))]),_:2},1024),s(q,null,{default:a(()=>[d(i(e.Order),1)]),_:2},1024),s(q,null,{default:a(()=>[s(X,{variant:1===e.Level||2===e.Level?"secondary":3===e.Level?"outline":"secondary",class:{"bg-red-100 text-red-800 font-medium":1===e.Level,"bg-blue-100 text-blue-800 font-medium":2===e.Level,"bg-green-100 text-green-800 font-medium":3===e.Level,"bg-orange-100 text-orange-800 font-medium":e.Level>=4}},{default:a(()=>[s("span",{class:{"text-red-800":1===e.Level,"text-blue-800":2===e.Level,"text-green-800":3===e.Level,"text-orange-800":e.Level>=4}}," Cấp "+i(e.Level),3)]),_:2},1032,["variant","class"])]),_:2},1024),s(q,null,{default:a(()=>[s(X,{variant:e.IsActive?"default":"destructive"},{default:a(()=>[d(i(e.IsActive?"Hoạt động":"Tạm dừng"),1)]),_:2},1032,["variant"])]),_:2},1024),s(q,null,{default:a(()=>[s("div",{class:"flex items-center gap-1"},[s(z,{variant:"ghost",size:"sm",onClick:l=>openEditModal(e)},{default:a(()=>[s(u(Z),{class:"w-4 h-4"})]),_:1},8,["onClick"]),s(z,{variant:"ghost",size:"sm",onClick:l=>confirmDelete(e),class:"text-destructive hover:text-destructive"},{default:a(()=>[s(u(G),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})])];l(`<div class="rounded-md border"${n}>`),l(x(N,null,{default:a((e,l,t,n)=>{if(!l)return[s(E,null,{default:a(()=>[s(O,null,{default:a(()=>[s(B,{class:"w-12"},{default:a(()=>[d("#")]),_:1}),s(B,null,{default:a(()=>[d("Tên menu")]),_:1}),s(B,null,{default:a(()=>[d("Đường dẫn")]),_:1}),s(B,null,{default:a(()=>[d("Menu cha")]),_:1}),s(B,null,{default:a(()=>[d("Thứ tự")]),_:1}),s(B,null,{default:a(()=>[d("Cấp")]),_:1}),s(B,null,{default:a(()=>[d("Trạng thái")]),_:1}),s(B,{class:"w-32"},{default:a(()=>[d("Thao tác")]),_:1})]),_:1})]),_:1}),s(K,null,{default:a(()=>[U.value?(v(),c(O,{key:0},{default:a(()=>[s(q,{colspan:"8",class:"text-center py-8"},{default:a(()=>[s("div",{class:"flex items-center justify-center gap-2"},[s(u(V),{class:"w-4 h-4 animate-spin"}),d(" Đang tải... ")])]),_:1})]),_:1})):0===ie.value.length?(v(),c(O,{key:1},{default:a(()=>[s(q,{colspan:"8",class:"text-center py-8 text-muted-foreground"},{default:a(()=>[d(" Không có menu nào ")]),_:1})]),_:1})):(v(!0),c(f,{key:2},m(ie.value,e=>(v(),c(O,{key:e.Id,class:{"bg-primary/5 border-l-4 border-l-primary":1===e.Level,"bg-blue-50/50 border-l-4 border-l-blue-500":2===e.Level,"bg-green-50/50 border-l-4 border-l-green-500":3===e.Level,"bg-orange-50/50 border-l-4 border-l-orange-500":e.Level>=4}},{default:a(()=>[s(q,{class:"font-medium"},{default:a(()=>[d(i(e.Id),1)]),_:2},1024),s(q,null,{default:a(()=>[s("div",{class:"flex items-center gap-2"},[s("div",{class:"flex items-center"},[(v(!0),c(f,null,m(e.Level-1,l=>(v(),c("div",{key:l,class:"w-4 h-4 flex items-center justify-center"},[l===e.Level-1?(v(),c("div",{key:0,class:"w-3 h-3 flex items-center justify-center"},[s("div",{class:"w-4 h-4 border-l-2 border-b-2 border-muted-foreground/60 rounded-bl-sm"})])):(v(),c("div",{key:1,class:"w-3 h-3 flex items-center justify-center"},[s("div",{class:"w-px h-3 bg-border"})]))]))),128))]),s("div",{class:["flex items-center justify-center rounded-md",1===e.Level?"w-8 h-8 bg-primary/10 border border-primary/20":2===e.Level?"w-6 h-6 bg-blue-50 border border-blue-200":3===e.Level?"w-6 h-6 bg-green-50 border border-green-200":"w-6 h-6 bg-orange-50 border border-orange-200"]},[(v(),c(o(u(de)(e.Icon)),{class:["w-4 h-4",1===e.Level?"text-primary":2===e.Level?"text-blue-600":3===e.Level?"text-green-600":"text-orange-600"]},null,8,["class"]))],2),hasChildren(e.Id)?(v(),c("button",{key:0,onClick:l=>toggleMenuCollapse(e.Id),class:"flex items-center justify-center w-4 h-4 rounded hover:bg-muted transition-colors cursor-pointer",title:isMenuCollapsed(e.Id)?"Mở rộng":"Thu gọn"},[s(u(F),{class:["w-3 h-3 transition-transform duration-200 text-muted-foreground",isMenuCollapsed(e.Id)?"rotate-0":"rotate-90"]},null,8,["class"])],8,["onClick","title"])):(v(),c("div",{key:1,class:"w-4 h-4"})),s("span",{class:{"font-semibold text-foreground":1===e.Level,"font-medium text-blue-700":2===e.Level,"text-green-700":3===e.Level,"text-orange-700":e.Level>=4}},i(e.Name),3)])]),_:2},1024),s(q,null,{default:a(()=>[s("code",{class:"text-xs bg-muted px-1 rounded"},i("#parent"===e.Href?"#":e.Href),1)]),_:2},1024),s(q,null,{default:a(()=>[e.ParentId?(v(),c("span",{key:0,class:"text-sm text-muted-foreground"},i(getParentName(e.ParentId)),1)):(v(),c("span",{key:1,class:"text-sm text-muted-foreground"},"-"))]),_:2},1024),s(q,null,{default:a(()=>[d(i(e.Order),1)]),_:2},1024),s(q,null,{default:a(()=>[s(X,{variant:1===e.Level||2===e.Level?"secondary":3===e.Level?"outline":"secondary",class:{"bg-red-100 text-red-800 font-medium":1===e.Level,"bg-blue-100 text-blue-800 font-medium":2===e.Level,"bg-green-100 text-green-800 font-medium":3===e.Level,"bg-orange-100 text-orange-800 font-medium":e.Level>=4}},{default:a(()=>[s("span",{class:{"text-red-800":1===e.Level,"text-blue-800":2===e.Level,"text-green-800":3===e.Level,"text-orange-800":e.Level>=4}}," Cấp "+i(e.Level),3)]),_:2},1032,["variant","class"])]),_:2},1024),s(q,null,{default:a(()=>[s(X,{variant:e.IsActive?"default":"destructive"},{default:a(()=>[d(i(e.IsActive?"Hoạt động":"Tạm dừng"),1)]),_:2},1032,["variant"])]),_:2},1024),s(q,null,{default:a(()=>[s("div",{class:"flex items-center gap-1"},[s(z,{variant:"ghost",size:"sm",onClick:l=>openEditModal(e)},{default:a(()=>[s(u(Z),{class:"w-4 h-4"})]),_:1},8,["onClick"]),s(z,{variant:"ghost",size:"sm",onClick:l=>confirmDelete(e),class:"text-destructive hover:text-destructive"},{default:a(()=>[s(u(G),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})];l(x(E,null,{default:a((e,l,t,n)=>{if(!l)return[s(O,null,{default:a(()=>[s(B,{class:"w-12"},{default:a(()=>[d("#")]),_:1}),s(B,null,{default:a(()=>[d("Tên menu")]),_:1}),s(B,null,{default:a(()=>[d("Đường dẫn")]),_:1}),s(B,null,{default:a(()=>[d("Menu cha")]),_:1}),s(B,null,{default:a(()=>[d("Thứ tự")]),_:1}),s(B,null,{default:a(()=>[d("Cấp")]),_:1}),s(B,null,{default:a(()=>[d("Trạng thái")]),_:1}),s(B,{class:"w-32"},{default:a(()=>[d("Thao tác")]),_:1})]),_:1})];l(x(O,null,{default:a((e,l,t,n)=>{if(!l)return[s(B,{class:"w-12"},{default:a(()=>[d("#")]),_:1}),s(B,null,{default:a(()=>[d("Tên menu")]),_:1}),s(B,null,{default:a(()=>[d("Đường dẫn")]),_:1}),s(B,null,{default:a(()=>[d("Menu cha")]),_:1}),s(B,null,{default:a(()=>[d("Thứ tự")]),_:1}),s(B,null,{default:a(()=>[d("Cấp")]),_:1}),s(B,null,{default:a(()=>[d("Trạng thái")]),_:1}),s(B,{class:"w-32"},{default:a(()=>[d("Thao tác")]),_:1})];l(x(B,{class:"w-12"},{default:a((e,l,t,n)=>{if(!l)return[d("#")];l("#")}),_:1},t,n)),l(x(B,null,{default:a((e,l,t,n)=>{if(!l)return[d("Tên menu")];l("Tên menu")}),_:1},t,n)),l(x(B,null,{default:a((e,l,t,n)=>{if(!l)return[d("Đường dẫn")];l("Đường dẫn")}),_:1},t,n)),l(x(B,null,{default:a((e,l,t,n)=>{if(!l)return[d("Menu cha")];l("Menu cha")}),_:1},t,n)),l(x(B,null,{default:a((e,l,t,n)=>{if(!l)return[d("Thứ tự")];l("Thứ tự")}),_:1},t,n)),l(x(B,null,{default:a((e,l,t,n)=>{if(!l)return[d("Cấp")];l("Cấp")}),_:1},t,n)),l(x(B,null,{default:a((e,l,t,n)=>{if(!l)return[d("Trạng thái")];l("Trạng thái")}),_:1},t,n)),l(x(B,{class:"w-32"},{default:a((e,l,t,n)=>{if(!l)return[d("Thao tác")];l("Thao tác")}),_:1},t,n))}),_:1},t,n))}),_:1},t,n)),l(x(K,null,{default:a((e,l,t,n)=>{if(!l)return[U.value?(v(),c(O,{key:0},{default:a(()=>[s(q,{colspan:"8",class:"text-center py-8"},{default:a(()=>[s("div",{class:"flex items-center justify-center gap-2"},[s(u(V),{class:"w-4 h-4 animate-spin"}),d(" Đang tải... ")])]),_:1})]),_:1})):0===ie.value.length?(v(),c(O,{key:1},{default:a(()=>[s(q,{colspan:"8",class:"text-center py-8 text-muted-foreground"},{default:a(()=>[d(" Không có menu nào ")]),_:1})]),_:1})):(v(!0),c(f,{key:2},m(ie.value,e=>(v(),c(O,{key:e.Id,class:{"bg-primary/5 border-l-4 border-l-primary":1===e.Level,"bg-blue-50/50 border-l-4 border-l-blue-500":2===e.Level,"bg-green-50/50 border-l-4 border-l-green-500":3===e.Level,"bg-orange-50/50 border-l-4 border-l-orange-500":e.Level>=4}},{default:a(()=>[s(q,{class:"font-medium"},{default:a(()=>[d(i(e.Id),1)]),_:2},1024),s(q,null,{default:a(()=>[s("div",{class:"flex items-center gap-2"},[s("div",{class:"flex items-center"},[(v(!0),c(f,null,m(e.Level-1,l=>(v(),c("div",{key:l,class:"w-4 h-4 flex items-center justify-center"},[l===e.Level-1?(v(),c("div",{key:0,class:"w-3 h-3 flex items-center justify-center"},[s("div",{class:"w-4 h-4 border-l-2 border-b-2 border-muted-foreground/60 rounded-bl-sm"})])):(v(),c("div",{key:1,class:"w-3 h-3 flex items-center justify-center"},[s("div",{class:"w-px h-3 bg-border"})]))]))),128))]),s("div",{class:["flex items-center justify-center rounded-md",1===e.Level?"w-8 h-8 bg-primary/10 border border-primary/20":2===e.Level?"w-6 h-6 bg-blue-50 border border-blue-200":3===e.Level?"w-6 h-6 bg-green-50 border border-green-200":"w-6 h-6 bg-orange-50 border border-orange-200"]},[(v(),c(o(u(de)(e.Icon)),{class:["w-4 h-4",1===e.Level?"text-primary":2===e.Level?"text-blue-600":3===e.Level?"text-green-600":"text-orange-600"]},null,8,["class"]))],2),hasChildren(e.Id)?(v(),c("button",{key:0,onClick:l=>toggleMenuCollapse(e.Id),class:"flex items-center justify-center w-4 h-4 rounded hover:bg-muted transition-colors cursor-pointer",title:isMenuCollapsed(e.Id)?"Mở rộng":"Thu gọn"},[s(u(F),{class:["w-3 h-3 transition-transform duration-200 text-muted-foreground",isMenuCollapsed(e.Id)?"rotate-0":"rotate-90"]},null,8,["class"])],8,["onClick","title"])):(v(),c("div",{key:1,class:"w-4 h-4"})),s("span",{class:{"font-semibold text-foreground":1===e.Level,"font-medium text-blue-700":2===e.Level,"text-green-700":3===e.Level,"text-orange-700":e.Level>=4}},i(e.Name),3)])]),_:2},1024),s(q,null,{default:a(()=>[s("code",{class:"text-xs bg-muted px-1 rounded"},i("#parent"===e.Href?"#":e.Href),1)]),_:2},1024),s(q,null,{default:a(()=>[e.ParentId?(v(),c("span",{key:0,class:"text-sm text-muted-foreground"},i(getParentName(e.ParentId)),1)):(v(),c("span",{key:1,class:"text-sm text-muted-foreground"},"-"))]),_:2},1024),s(q,null,{default:a(()=>[d(i(e.Order),1)]),_:2},1024),s(q,null,{default:a(()=>[s(X,{variant:1===e.Level||2===e.Level?"secondary":3===e.Level?"outline":"secondary",class:{"bg-red-100 text-red-800 font-medium":1===e.Level,"bg-blue-100 text-blue-800 font-medium":2===e.Level,"bg-green-100 text-green-800 font-medium":3===e.Level,"bg-orange-100 text-orange-800 font-medium":e.Level>=4}},{default:a(()=>[s("span",{class:{"text-red-800":1===e.Level,"text-blue-800":2===e.Level,"text-green-800":3===e.Level,"text-orange-800":e.Level>=4}}," Cấp "+i(e.Level),3)]),_:2},1032,["variant","class"])]),_:2},1024),s(q,null,{default:a(()=>[s(X,{variant:e.IsActive?"default":"destructive"},{default:a(()=>[d(i(e.IsActive?"Hoạt động":"Tạm dừng"),1)]),_:2},1032,["variant"])]),_:2},1024),s(q,null,{default:a(()=>[s("div",{class:"flex items-center gap-1"},[s(z,{variant:"ghost",size:"sm",onClick:l=>openEditModal(e)},{default:a(()=>[s(u(Z),{class:"w-4 h-4"})]),_:1},8,["onClick"]),s(z,{variant:"ghost",size:"sm",onClick:l=>confirmDelete(e),class:"text-destructive hover:text-destructive"},{default:a(()=>[s(u(G),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1032,["class"]))),128))];U.value?l(x(O,null,{default:a((e,l,t,n)=>{if(!l)return[s(q,{colspan:"8",class:"text-center py-8"},{default:a(()=>[s("div",{class:"flex items-center justify-center gap-2"},[s(u(V),{class:"w-4 h-4 animate-spin"}),d(" Đang tải... ")])]),_:1})];l(x(q,{colspan:"8",class:"text-center py-8"},{default:a((e,l,t,n)=>{if(!l)return[s("div",{class:"flex items-center justify-center gap-2"},[s(u(V),{class:"w-4 h-4 animate-spin"}),d(" Đang tải... ")])];l(`<div class="flex items-center justify-center gap-2"${n}>`),l(x(u(V),{class:"w-4 h-4 animate-spin"},null,t,n)),l(" Đang tải... </div>")}),_:1},t,n))}),_:1},t,n)):0===ie.value.length?l(x(O,null,{default:a((e,l,t,n)=>{if(!l)return[s(q,{colspan:"8",class:"text-center py-8 text-muted-foreground"},{default:a(()=>[d(" Không có menu nào ")]),_:1})];l(x(q,{colspan:"8",class:"text-center py-8 text-muted-foreground"},{default:a((e,l,t,n)=>{if(!l)return[d(" Không có menu nào ")];l(" Không có menu nào ")}),_:1},t,n))}),_:1},t,n)):(l("\x3c!--[--\x3e"),y(ie.value,e=>{l(x(O,{key:e.Id,class:{"bg-primary/5 border-l-4 border-l-primary":1===e.Level,"bg-blue-50/50 border-l-4 border-l-blue-500":2===e.Level,"bg-green-50/50 border-l-4 border-l-green-500":3===e.Level,"bg-orange-50/50 border-l-4 border-l-orange-500":e.Level>=4}},{default:a((l,t,n,r)=>{if(!t)return[s(q,{class:"font-medium"},{default:a(()=>[d(i(e.Id),1)]),_:2},1024),s(q,null,{default:a(()=>[s("div",{class:"flex items-center gap-2"},[s("div",{class:"flex items-center"},[(v(!0),c(f,null,m(e.Level-1,l=>(v(),c("div",{key:l,class:"w-4 h-4 flex items-center justify-center"},[l===e.Level-1?(v(),c("div",{key:0,class:"w-3 h-3 flex items-center justify-center"},[s("div",{class:"w-4 h-4 border-l-2 border-b-2 border-muted-foreground/60 rounded-bl-sm"})])):(v(),c("div",{key:1,class:"w-3 h-3 flex items-center justify-center"},[s("div",{class:"w-px h-3 bg-border"})]))]))),128))]),s("div",{class:["flex items-center justify-center rounded-md",1===e.Level?"w-8 h-8 bg-primary/10 border border-primary/20":2===e.Level?"w-6 h-6 bg-blue-50 border border-blue-200":3===e.Level?"w-6 h-6 bg-green-50 border border-green-200":"w-6 h-6 bg-orange-50 border border-orange-200"]},[(v(),c(o(u(de)(e.Icon)),{class:["w-4 h-4",1===e.Level?"text-primary":2===e.Level?"text-blue-600":3===e.Level?"text-green-600":"text-orange-600"]},null,8,["class"]))],2),hasChildren(e.Id)?(v(),c("button",{key:0,onClick:l=>toggleMenuCollapse(e.Id),class:"flex items-center justify-center w-4 h-4 rounded hover:bg-muted transition-colors cursor-pointer",title:isMenuCollapsed(e.Id)?"Mở rộng":"Thu gọn"},[s(u(F),{class:["w-3 h-3 transition-transform duration-200 text-muted-foreground",isMenuCollapsed(e.Id)?"rotate-0":"rotate-90"]},null,8,["class"])],8,["onClick","title"])):(v(),c("div",{key:1,class:"w-4 h-4"})),s("span",{class:{"font-semibold text-foreground":1===e.Level,"font-medium text-blue-700":2===e.Level,"text-green-700":3===e.Level,"text-orange-700":e.Level>=4}},i(e.Name),3)])]),_:2},1024),s(q,null,{default:a(()=>[s("code",{class:"text-xs bg-muted px-1 rounded"},i("#parent"===e.Href?"#":e.Href),1)]),_:2},1024),s(q,null,{default:a(()=>[e.ParentId?(v(),c("span",{key:0,class:"text-sm text-muted-foreground"},i(getParentName(e.ParentId)),1)):(v(),c("span",{key:1,class:"text-sm text-muted-foreground"},"-"))]),_:2},1024),s(q,null,{default:a(()=>[d(i(e.Order),1)]),_:2},1024),s(q,null,{default:a(()=>[s(X,{variant:1===e.Level||2===e.Level?"secondary":3===e.Level?"outline":"secondary",class:{"bg-red-100 text-red-800 font-medium":1===e.Level,"bg-blue-100 text-blue-800 font-medium":2===e.Level,"bg-green-100 text-green-800 font-medium":3===e.Level,"bg-orange-100 text-orange-800 font-medium":e.Level>=4}},{default:a(()=>[s("span",{class:{"text-red-800":1===e.Level,"text-blue-800":2===e.Level,"text-green-800":3===e.Level,"text-orange-800":e.Level>=4}}," Cấp "+i(e.Level),3)]),_:2},1032,["variant","class"])]),_:2},1024),s(q,null,{default:a(()=>[s(X,{variant:e.IsActive?"default":"destructive"},{default:a(()=>[d(i(e.IsActive?"Hoạt động":"Tạm dừng"),1)]),_:2},1032,["variant"])]),_:2},1024),s(q,null,{default:a(()=>[s("div",{class:"flex items-center gap-1"},[s(z,{variant:"ghost",size:"sm",onClick:l=>openEditModal(e)},{default:a(()=>[s(u(Z),{class:"w-4 h-4"})]),_:1},8,["onClick"]),s(z,{variant:"ghost",size:"sm",onClick:l=>confirmDelete(e),class:"text-destructive hover:text-destructive"},{default:a(()=>[s(u(G),{class:"w-4 h-4"})]),_:1},8,["onClick"])])]),_:2},1024)];t(x(q,{class:"font-medium"},{default:a((l,t,n,r)=>{if(!t)return[d(i(e.Id),1)];t(`${_(e.Id)}`)}),_:2},n,r)),t(x(q,null,{default:a((l,t,n,r)=>{if(!t)return[s("div",{class:"flex items-center gap-2"},[s("div",{class:"flex items-center"},[(v(!0),c(f,null,m(e.Level-1,l=>(v(),c("div",{key:l,class:"w-4 h-4 flex items-center justify-center"},[l===e.Level-1?(v(),c("div",{key:0,class:"w-3 h-3 flex items-center justify-center"},[s("div",{class:"w-4 h-4 border-l-2 border-b-2 border-muted-foreground/60 rounded-bl-sm"})])):(v(),c("div",{key:1,class:"w-3 h-3 flex items-center justify-center"},[s("div",{class:"w-px h-3 bg-border"})]))]))),128))]),s("div",{class:["flex items-center justify-center rounded-md",1===e.Level?"w-8 h-8 bg-primary/10 border border-primary/20":2===e.Level?"w-6 h-6 bg-blue-50 border border-blue-200":3===e.Level?"w-6 h-6 bg-green-50 border border-green-200":"w-6 h-6 bg-orange-50 border border-orange-200"]},[(v(),c(o(u(de)(e.Icon)),{class:["w-4 h-4",1===e.Level?"text-primary":2===e.Level?"text-blue-600":3===e.Level?"text-green-600":"text-orange-600"]},null,8,["class"]))],2),hasChildren(e.Id)?(v(),c("button",{key:0,onClick:l=>toggleMenuCollapse(e.Id),class:"flex items-center justify-center w-4 h-4 rounded hover:bg-muted transition-colors cursor-pointer",title:isMenuCollapsed(e.Id)?"Mở rộng":"Thu gọn"},[s(u(F),{class:["w-3 h-3 transition-transform duration-200 text-muted-foreground",isMenuCollapsed(e.Id)?"rotate-0":"rotate-90"]},null,8,["class"])],8,["onClick","title"])):(v(),c("div",{key:1,class:"w-4 h-4"})),s("span",{class:{"font-semibold text-foreground":1===e.Level,"font-medium text-blue-700":2===e.Level,"text-green-700":3===e.Level,"text-orange-700":e.Level>=4}},i(e.Name),3)])];t(`<div class="flex items-center gap-2"${r}><div class="flex items-center"${r}>\x3c!--[--\x3e`),y(e.Level-1,l=>{t(`<div class="w-4 h-4 flex items-center justify-center"${r}>`),l===e.Level-1?t(`<div class="w-3 h-3 flex items-center justify-center"${r}><div class="w-4 h-4 border-l-2 border-b-2 border-muted-foreground/60 rounded-bl-sm"${r}></div></div>`):t(`<div class="w-3 h-3 flex items-center justify-center"${r}><div class="w-px h-3 bg-border"${r}></div></div>`),t("</div>")}),t(`\x3c!--]--\x3e</div><div class="${L(["flex items-center justify-center rounded-md",1===e.Level?"w-8 h-8 bg-primary/10 border border-primary/20":2===e.Level?"w-6 h-6 bg-blue-50 border border-blue-200":3===e.Level?"w-6 h-6 bg-green-50 border border-green-200":"w-6 h-6 bg-orange-50 border border-orange-200"])}"${r}>`),w(t,s(o(u(de)(e.Icon)),{class:["w-4 h-4",1===e.Level?"text-primary":2===e.Level?"text-blue-600":3===e.Level?"text-green-600":"text-orange-600"]},null),n,r),t("</div>"),hasChildren(e.Id)?(t(`<button class="flex items-center justify-center w-4 h-4 rounded hover:bg-muted transition-colors cursor-pointer"${k("title",isMenuCollapsed(e.Id)?"Mở rộng":"Thu gọn")}${r}>`),t(x(u(F),{class:["w-3 h-3 transition-transform duration-200 text-muted-foreground",isMenuCollapsed(e.Id)?"rotate-0":"rotate-90"]},null,n,r)),t("</button>")):t(`<div class="w-4 h-4"${r}></div>`),t(`<span class="${L({"font-semibold text-foreground":1===e.Level,"font-medium text-blue-700":2===e.Level,"text-green-700":3===e.Level,"text-orange-700":e.Level>=4})}"${r}>${_(e.Name)}</span></div>`)}),_:2},n,r)),t(x(q,null,{default:a((l,t,n,r)=>{if(!t)return[s("code",{class:"text-xs bg-muted px-1 rounded"},i("#parent"===e.Href?"#":e.Href),1)];t(`<code class="text-xs bg-muted px-1 rounded"${r}>${_("#parent"===e.Href?"#":e.Href)}</code>`)}),_:2},n,r)),t(x(q,null,{default:a((l,t,n,r)=>{if(!t)return[e.ParentId?(v(),c("span",{key:0,class:"text-sm text-muted-foreground"},i(getParentName(e.ParentId)),1)):(v(),c("span",{key:1,class:"text-sm text-muted-foreground"},"-"))];e.ParentId?t(`<span class="text-sm text-muted-foreground"${r}>${_(getParentName(e.ParentId))}</span>`):t(`<span class="text-sm text-muted-foreground"${r}>-</span>`)}),_:2},n,r)),t(x(q,null,{default:a((l,t,n,r)=>{if(!t)return[d(i(e.Order),1)];t(`${_(e.Order)}`)}),_:2},n,r)),t(x(q,null,{default:a((l,t,n,r)=>{if(!t)return[s(X,{variant:1===e.Level||2===e.Level?"secondary":3===e.Level?"outline":"secondary",class:{"bg-red-100 text-red-800 font-medium":1===e.Level,"bg-blue-100 text-blue-800 font-medium":2===e.Level,"bg-green-100 text-green-800 font-medium":3===e.Level,"bg-orange-100 text-orange-800 font-medium":e.Level>=4}},{default:a(()=>[s("span",{class:{"text-red-800":1===e.Level,"text-blue-800":2===e.Level,"text-green-800":3===e.Level,"text-orange-800":e.Level>=4}}," Cấp "+i(e.Level),3)]),_:2},1032,["variant","class"])];t(x(X,{variant:1===e.Level||2===e.Level?"secondary":3===e.Level?"outline":"secondary",class:{"bg-red-100 text-red-800 font-medium":1===e.Level,"bg-blue-100 text-blue-800 font-medium":2===e.Level,"bg-green-100 text-green-800 font-medium":3===e.Level,"bg-orange-100 text-orange-800 font-medium":e.Level>=4}},{default:a((l,t,n,r)=>{if(!t)return[s("span",{class:{"text-red-800":1===e.Level,"text-blue-800":2===e.Level,"text-green-800":3===e.Level,"text-orange-800":e.Level>=4}}," Cấp "+i(e.Level),3)];t(`<span class="${L({"text-red-800":1===e.Level,"text-blue-800":2===e.Level,"text-green-800":3===e.Level,"text-orange-800":e.Level>=4})}"${r}> Cấp ${_(e.Level)}</span>`)}),_:2},n,r))}),_:2},n,r)),t(x(q,null,{default:a((l,t,n,r)=>{if(!t)return[s(X,{variant:e.IsActive?"default":"destructive"},{default:a(()=>[d(i(e.IsActive?"Hoạt động":"Tạm dừng"),1)]),_:2},1032,["variant"])];t(x(X,{variant:e.IsActive?"default":"destructive"},{default:a((l,t,n,r)=>{if(!t)return[d(i(e.IsActive?"Hoạt động":"Tạm dừng"),1)];t(`${_(e.IsActive?"Hoạt động":"Tạm dừng")}`)}),_:2},n,r))}),_:2},n,r)),t(x(q,null,{default:a((l,t,n,r)=>{if(!t)return[s("div",{class:"flex items-center gap-1"},[s(z,{variant:"ghost",size:"sm",onClick:l=>openEditModal(e)},{default:a(()=>[s(u(Z),{class:"w-4 h-4"})]),_:1},8,["onClick"]),s(z,{variant:"ghost",size:"sm",onClick:l=>confirmDelete(e),class:"text-destructive hover:text-destructive"},{default:a(()=>[s(u(G),{class:"w-4 h-4"})]),_:1},8,["onClick"])])];t(`<div class="flex items-center gap-1"${r}>`),t(x(z,{variant:"ghost",size:"sm",onClick:l=>openEditModal(e)},{default:a((e,l,t,n)=>{if(!l)return[s(u(Z),{class:"w-4 h-4"})];l(x(u(Z),{class:"w-4 h-4"},null,t,n))}),_:2},n,r)),t(x(z,{variant:"ghost",size:"sm",onClick:l=>confirmDelete(e),class:"text-destructive hover:text-destructive"},{default:a((e,l,t,n)=>{if(!l)return[s(u(G),{class:"w-4 h-4"})];l(x(u(G),{class:"w-4 h-4"},null,t,n))}),_:2},n,r)),t("</div>")}),_:2},n,r))}),_:2},t,n))}),l("\x3c!--]--\x3e"))}),_:1},t,n))}),_:1},t,n)),l("</div>")}),_:1},t,n))}),_:1},t)),ee.value?(l('<div class="fixed inset-0 z-50 flex items-center justify-center"><div class="fixed inset-0 bg-black/50"></div>'),l(x(j,{class:"relative w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto"},{default:a((e,l,t,n)=>{if(!l)return[s(M,null,{default:a(()=>[s(H,null,{default:a(()=>[d(i(te.value?"Chỉnh sửa Menu":"Thêm Menu Mới"),1)]),_:1}),s(D,null,{default:a(()=>[d(i(te.value?"Cập nhật thông tin menu":"Tạo menu mới cho hệ thống"),1)]),_:1})]),_:1}),s(P,null,{default:a(()=>[s("form",{onSubmit:p(submitForm,["prevent"]),class:"space-y-4"},[s("div",{class:"grid gap-4 md:grid-cols-2"},[s("div",{class:"space-y-2"},[s(S,{for:"name"},{default:a(()=>[d("Tên menu *")]),_:1}),s(A,{id:"name",value:ue.value.name,onInput:e=>ue.value.name=e.target.value,placeholder:"Nhập tên menu",required:""},null,8,["value","onInput"])]),s("div",{class:"space-y-2"},[s(S,{for:"href"},{default:a(()=>[d("Đường dẫn")]),_:1}),s(A,{id:"href",value:ue.value.href,onInput:e=>ue.value.href=e.target.value,placeholder:"/path/to/page (dùng # cho menu cha)"},null,8,["value","onInput"]),s("p",{class:"text-xs text-muted-foreground"},' Dùng "#" nếu menu này chỉ dùng để phân tầng (có menu con) ')])]),s("div",{class:"grid gap-4 md:grid-cols-2"},[s("div",{class:"space-y-2"},[s(S,{for:"icon"},{default:a(()=>[d("Icon")]),_:1}),s("select",{id:"icon",value:ue.value.icon,onChange:e=>ue.value.icon=e.target.value,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[(v(!0),c(f,null,m(u(se),e=>(v(),c("option",{key:e,value:e},i(e),9,["value"]))),128))],40,["value","onChange"])]),s("div",{class:"space-y-2"},[s(S,{for:"order"},{default:a(()=>[d("Thứ tự")]),_:1}),s(A,{id:"order",value:ue.value.order,onInput:e=>ue.value.order=parseInt(e.target.value)||1,type:"number",min:"1",placeholder:"1"},null,8,["value","onInput"])])]),s("div",{class:"grid gap-4 md:grid-cols-2"},[s("div",{class:"space-y-2"},[s(S,{for:"parent"},{default:a(()=>[d("Menu cha")]),_:1}),s("select",{id:"parent",value:ue.value.parent_id,onChange:e=>updateParentAndLevel(e.target.value),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[s("option",{value:null},"Không có menu cha"),(v(!0),c(f,null,m(oe.value,e=>(v(),c("option",{key:e.id,value:e.id},i("  ".repeat(e.level-1))+i(e.name),9,["value"]))),128))],40,["value","onChange"])]),s("div",{class:"space-y-2"},[s(S,null,{default:a(()=>[d("Cấp menu")]),_:1}),s("div",{class:"flex h-10 w-full items-center rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground"},i(ue.value.level),1)])]),s("div",{class:"flex items-center space-x-2"},[s("input",{id:"is_active",checked:ue.value.is_active,onChange:e=>ue.value.is_active=e.target.checked,type:"checkbox",class:"rounded"},null,40,["checked","onChange"]),s(S,{for:"is_active"},{default:a(()=>[d("Menu hoạt động")]),_:1})]),s("div",{class:"flex justify-end gap-2 pt-4"},[s(z,{type:"button",variant:"outline",onClick:closeModal},{default:a(()=>[d(" Hủy ")]),_:1}),s(z,{type:"submit",disabled:W.value},{default:a(()=>[W.value?(v(),c(u(V),{key:0,class:"w-4 h-4 animate-spin mr-2"})):g("",!0),d(" "+i(te.value?"Cập nhật":"Tạo mới"),1)]),_:1},8,["disabled"])])],32)]),_:1})];l(x(M,null,{default:a((e,l,t,n)=>{if(!l)return[s(H,null,{default:a(()=>[d(i(te.value?"Chỉnh sửa Menu":"Thêm Menu Mới"),1)]),_:1}),s(D,null,{default:a(()=>[d(i(te.value?"Cập nhật thông tin menu":"Tạo menu mới cho hệ thống"),1)]),_:1})];l(x(H,null,{default:a((e,l,t,n)=>{if(!l)return[d(i(te.value?"Chỉnh sửa Menu":"Thêm Menu Mới"),1)];l(`${_(te.value?"Chỉnh sửa Menu":"Thêm Menu Mới")}`)}),_:1},t,n)),l(x(D,null,{default:a((e,l,t,n)=>{if(!l)return[d(i(te.value?"Cập nhật thông tin menu":"Tạo menu mới cho hệ thống"),1)];l(`${_(te.value?"Cập nhật thông tin menu":"Tạo menu mới cho hệ thống")}`)}),_:1},t,n))}),_:1},t,n)),l(x(P,null,{default:a((e,l,t,n)=>{if(!l)return[s("form",{onSubmit:p(submitForm,["prevent"]),class:"space-y-4"},[s("div",{class:"grid gap-4 md:grid-cols-2"},[s("div",{class:"space-y-2"},[s(S,{for:"name"},{default:a(()=>[d("Tên menu *")]),_:1}),s(A,{id:"name",value:ue.value.name,onInput:e=>ue.value.name=e.target.value,placeholder:"Nhập tên menu",required:""},null,8,["value","onInput"])]),s("div",{class:"space-y-2"},[s(S,{for:"href"},{default:a(()=>[d("Đường dẫn")]),_:1}),s(A,{id:"href",value:ue.value.href,onInput:e=>ue.value.href=e.target.value,placeholder:"/path/to/page (dùng # cho menu cha)"},null,8,["value","onInput"]),s("p",{class:"text-xs text-muted-foreground"},' Dùng "#" nếu menu này chỉ dùng để phân tầng (có menu con) ')])]),s("div",{class:"grid gap-4 md:grid-cols-2"},[s("div",{class:"space-y-2"},[s(S,{for:"icon"},{default:a(()=>[d("Icon")]),_:1}),s("select",{id:"icon",value:ue.value.icon,onChange:e=>ue.value.icon=e.target.value,class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[(v(!0),c(f,null,m(u(se),e=>(v(),c("option",{key:e,value:e},i(e),9,["value"]))),128))],40,["value","onChange"])]),s("div",{class:"space-y-2"},[s(S,{for:"order"},{default:a(()=>[d("Thứ tự")]),_:1}),s(A,{id:"order",value:ue.value.order,onInput:e=>ue.value.order=parseInt(e.target.value)||1,type:"number",min:"1",placeholder:"1"},null,8,["value","onInput"])])]),s("div",{class:"grid gap-4 md:grid-cols-2"},[s("div",{class:"space-y-2"},[s(S,{for:"parent"},{default:a(()=>[d("Menu cha")]),_:1}),s("select",{id:"parent",value:ue.value.parent_id,onChange:e=>updateParentAndLevel(e.target.value),class:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"},[s("option",{value:null},"Không có menu cha"),(v(!0),c(f,null,m(oe.value,e=>(v(),c("option",{key:e.id,value:e.id},i("  ".repeat(e.level-1))+i(e.name),9,["value"]))),128))],40,["value","onChange"])]),s("div",{class:"space-y-2"},[s(S,null,{default:a(()=>[d("Cấp menu")]),_:1}),s("div",{class:"flex h-10 w-full items-center rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground"},i(ue.value.level),1)])]),s("div",{class:"flex items-center space-x-2"},[s("input",{id:"is_active",checked:ue.value.is_active,onChange:e=>ue.value.is_active=e.target.checked,type:"checkbox",class:"rounded"},null,40,["checked","onChange"]),s(S,{for:"is_active"},{default:a(()=>[d("Menu hoạt động")]),_:1})]),s("div",{class:"flex justify-end gap-2 pt-4"},[s(z,{type:"button",variant:"outline",onClick:closeModal},{default:a(()=>[d(" Hủy ")]),_:1}),s(z,{type:"submit",disabled:W.value},{default:a(()=>[W.value?(v(),c(u(V),{key:0,class:"w-4 h-4 animate-spin mr-2"})):g("",!0),d(" "+i(te.value?"Cập nhật":"Tạo mới"),1)]),_:1},8,["disabled"])])],32)];l(`<form class="space-y-4"${n}><div class="grid gap-4 md:grid-cols-2"${n}><div class="space-y-2"${n}>`),l(x(S,{for:"name"},{default:a((e,l,t,n)=>{if(!l)return[d("Tên menu *")];l("Tên menu *")}),_:1},t,n)),l(x(A,{id:"name",value:ue.value.name,onInput:e=>ue.value.name=e.target.value,placeholder:"Nhập tên menu",required:""},null,t,n)),l(`</div><div class="space-y-2"${n}>`),l(x(S,{for:"href"},{default:a((e,l,t,n)=>{if(!l)return[d("Đường dẫn")];l("Đường dẫn")}),_:1},t,n)),l(x(A,{id:"href",value:ue.value.href,onInput:e=>ue.value.href=e.target.value,placeholder:"/path/to/page (dùng # cho menu cha)"},null,t,n)),l(`<p class="text-xs text-muted-foreground"${n}> Dùng &quot;#&quot; nếu menu này chỉ dùng để phân tầng (có menu con) </p></div></div><div class="grid gap-4 md:grid-cols-2"${n}><div class="space-y-2"${n}>`),l(x(S,{for:"icon"},{default:a((e,l,t,n)=>{if(!l)return[d("Icon")];l("Icon")}),_:1},t,n)),l(`<select id="icon"${k("value",ue.value.icon)} class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"${n}>\x3c!--[--\x3e`),y(u(se),e=>{l(`<option${k("value",e)}${n}>${_(e)}</option>`)}),l(`\x3c!--]--\x3e</select></div><div class="space-y-2"${n}>`),l(x(S,{for:"order"},{default:a((e,l,t,n)=>{if(!l)return[d("Thứ tự")];l("Thứ tự")}),_:1},t,n)),l(x(A,{id:"order",value:ue.value.order,onInput:e=>ue.value.order=parseInt(e.target.value)||1,type:"number",min:"1",placeholder:"1"},null,t,n)),l(`</div></div><div class="grid gap-4 md:grid-cols-2"${n}><div class="space-y-2"${n}>`),l(x(S,{for:"parent"},{default:a((e,l,t,n)=>{if(!l)return[d("Menu cha")];l("Menu cha")}),_:1},t,n)),l(`<select id="parent"${k("value",ue.value.parent_id)} class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"${n}><option${k("value",null)}${n}>Không có menu cha</option>\x3c!--[--\x3e`),y(oe.value,e=>{l(`<option${k("value",e.id)}${n}>${_("  ".repeat(e.level-1))}${_(e.name)}</option>`)}),l(`\x3c!--]--\x3e</select></div><div class="space-y-2"${n}>`),l(x(S,null,{default:a((e,l,t,n)=>{if(!l)return[d("Cấp menu")];l("Cấp menu")}),_:1},t,n)),l(`<div class="flex h-10 w-full items-center rounded-md border border-input bg-muted px-3 py-2 text-sm text-muted-foreground"${n}>${_(ue.value.level)}</div></div></div><div class="flex items-center space-x-2"${n}><input id="is_active"${I(ue.value.is_active)?" checked":""} type="checkbox" class="rounded"${n}>`),l(x(S,{for:"is_active"},{default:a((e,l,t,n)=>{if(!l)return[d("Menu hoạt động")];l("Menu hoạt động")}),_:1},t,n)),l(`</div><div class="flex justify-end gap-2 pt-4"${n}>`),l(x(z,{type:"button",variant:"outline",onClick:closeModal},{default:a((e,l,t,n)=>{if(!l)return[d(" Hủy ")];l(" Hủy ")}),_:1},t,n)),l(x(z,{type:"submit",disabled:W.value},{default:a((e,l,t,n)=>{if(!l)return[W.value?(v(),c(u(V),{key:0,class:"w-4 h-4 animate-spin mr-2"})):g("",!0),d(" "+i(te.value?"Cập nhật":"Tạo mới"),1)];W.value?l(x(u(V),{class:"w-4 h-4 animate-spin mr-2"},null,t,n)):l("\x3c!----\x3e"),l(` ${_(te.value?"Cập nhật":"Tạo mới")}`)}),_:1},t,n)),l("</div></form>")}),_:1},t,n))}),_:1},t)),l("</div>")):l("\x3c!----\x3e"),le.value?(l('<div class="fixed inset-0 z-50 flex items-center justify-center"><div class="fixed inset-0 bg-black/50"></div>'),l(x(j,{class:"relative w-full max-w-md mx-4"},{default:a((e,l,t,n)=>{if(!l)return[s(M,null,{default:a(()=>[s(H,{class:"text-destructive"},{default:a(()=>[d("Xác nhận xóa")]),_:1}),s(D,null,{default:a(()=>[d(" Bạn có chắc chắn muốn xóa menu này không? ")]),_:1})]),_:1}),s(P,null,{default:a(()=>{var e,l;return[s("div",{class:"space-y-2"},[s("p",null,[s("strong",null,"Tên:"),d(" "+i(null==(e=ne.value)?void 0:e.name),1)]),s("p",null,[s("strong",null,"Đường dẫn:"),d(" "+i(null==(l=ne.value)?void 0:l.href),1)]),s("p",{class:"text-sm text-muted-foreground"}," Hành động này không thể hoàn tác. ")]),s("div",{class:"flex justify-end gap-2 pt-4"},[s(z,{variant:"outline",onClick:closeDeleteModal},{default:a(()=>[d(" Hủy ")]),_:1}),s(z,{variant:"destructive",onClick:deleteMenu,disabled:J.value},{default:a(()=>[J.value?(v(),c(u(V),{key:0,class:"w-4 h-4 animate-spin mr-2"})):g("",!0),d(" Xóa ")]),_:1},8,["disabled"])])]}),_:1})];l(x(M,null,{default:a((e,l,t,n)=>{if(!l)return[s(H,{class:"text-destructive"},{default:a(()=>[d("Xác nhận xóa")]),_:1}),s(D,null,{default:a(()=>[d(" Bạn có chắc chắn muốn xóa menu này không? ")]),_:1})];l(x(H,{class:"text-destructive"},{default:a((e,l,t,n)=>{if(!l)return[d("Xác nhận xóa")];l("Xác nhận xóa")}),_:1},t,n)),l(x(D,null,{default:a((e,l,t,n)=>{if(!l)return[d(" Bạn có chắc chắn muốn xóa menu này không? ")];l(" Bạn có chắc chắn muốn xóa menu này không? ")}),_:1},t,n))}),_:1},t,n)),l(x(P,null,{default:a((e,l,t,n)=>{var r,o,f,m;if(!l)return[s("div",{class:"space-y-2"},[s("p",null,[s("strong",null,"Tên:"),d(" "+i(null==(f=ne.value)?void 0:f.name),1)]),s("p",null,[s("strong",null,"Đường dẫn:"),d(" "+i(null==(m=ne.value)?void 0:m.href),1)]),s("p",{class:"text-sm text-muted-foreground"}," Hành động này không thể hoàn tác. ")]),s("div",{class:"flex justify-end gap-2 pt-4"},[s(z,{variant:"outline",onClick:closeDeleteModal},{default:a(()=>[d(" Hủy ")]),_:1}),s(z,{variant:"destructive",onClick:deleteMenu,disabled:J.value},{default:a(()=>[J.value?(v(),c(u(V),{key:0,class:"w-4 h-4 animate-spin mr-2"})):g("",!0),d(" Xóa ")]),_:1},8,["disabled"])])];l(`<div class="space-y-2"${n}><p${n}><strong${n}>Tên:</strong> ${_(null==(r=ne.value)?void 0:r.name)}</p><p${n}><strong${n}>Đường dẫn:</strong> ${_(null==(o=ne.value)?void 0:o.href)}</p><p class="text-sm text-muted-foreground"${n}> Hành động này không thể hoàn tác. </p></div><div class="flex justify-end gap-2 pt-4"${n}>`),l(x(z,{variant:"outline",onClick:closeDeleteModal},{default:a((e,l,t,n)=>{if(!l)return[d(" Hủy ")];l(" Hủy ")}),_:1},t,n)),l(x(z,{variant:"destructive",onClick:deleteMenu,disabled:J.value},{default:a((e,l,t,n)=>{if(!l)return[J.value?(v(),c(u(V),{key:0,class:"w-4 h-4 animate-spin mr-2"})):g("",!0),d(" Xóa ")];J.value?l(x(u(V),{class:"w-4 h-4 animate-spin mr-2"},null,t,n)):l("\x3c!----\x3e"),l(" Xóa ")}),_:1},t,n)),l("</div>")}),_:1},t,n))}),_:1},t)),l("</div>")):l("\x3c!----\x3e"),l("</div>")}}}),W=U.setup;U.setup=(e,l)=>{const t=b();return(t.modules||(t.modules=new Set)).add("pages/admin/menus.vue"),W?W(e,l):void 0};export{U as default};
