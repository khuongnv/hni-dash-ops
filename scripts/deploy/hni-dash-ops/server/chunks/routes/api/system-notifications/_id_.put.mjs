import{c as t,g as e,r as s,e as a}from"../../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";const o=t(async t=>{try{const o=e(t,"id"),i=await s(t);if(!o)throw a({statusCode:400,statusMessage:"ID thông báo không hợp lệ"});if(!i.title||!i.content)throw a({statusCode:400,statusMessage:"Vui lòng điền đầy đủ thông tin bắt buộc"});const n=await $fetch("/data/demo-system-notifications.ts"),r=n.findIndex(t=>t.id===parseInt(o));if(-1===r)throw a({statusCode:404,statusMessage:"Không tìm thấy thông báo"});const d={title:i.title.trim(),content:i.content.trim(),type:i.type||n[r].type,priority:i.priority||n[r].priority,is_active:void 0!==i.is_active?i.is_active:n[r].is_active,start_date:i.start_date||n[r].start_date,end_date:i.end_date||n[r].end_date,updated_at:(new Date).toISOString()};return n[r]={...n[r],...d},{success:!0,data:n[r],message:"Cập nhật thông báo thành công"}}catch(t){throw a({statusCode:t.statusCode||500,statusMessage:t.statusMessage||"Lỗi khi cập nhật thông báo"})}});export{o as default};
