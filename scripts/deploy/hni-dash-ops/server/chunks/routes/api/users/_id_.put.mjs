import{c as t,g as s,r as e,e as n}from"../../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";const a=t(async t=>{try{const a=s(t,"id"),o=await e(t),{full_name:d,username:i,password:r,email:u,department_id:p,role_id:g,position_id:l,gender_id:m,dob:h,status:c}=o;if(!a)throw n({statusCode:400,statusMessage:"ID người dùng không hợp lệ"});if(!d||!i||!u)throw n({statusCode:400,statusMessage:"Vui lòng điền đầy đủ thông tin bắt buộc"});const f=await $fetch("/data/demo-users.ts"),_=f.findIndex(t=>t.id===parseInt(a));if(-1===_)throw n({statusCode:404,statusMessage:"Không tìm thấy người dùng"});const w={full_name:d,username:i,email:u,department_id:p||null,role_id:g||null,position_id:l||null,gender_id:m||null,dob:h||null,status:c||"active",updated_at:(new Date).toISOString()};return r&&(w.password=r),f[_]={...f[_],...w},{success:!0,data:f[_],message:"Cập nhật người dùng thành công"}}catch(t){throw n({statusCode:t.statusCode||500,statusMessage:t.statusMessage||"Lỗi khi cập nhật người dùng"})}});export{a as default};
