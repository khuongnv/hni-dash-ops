import{c as t,r as e,e as a}from"../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";const o=t(async t=>{try{const o=await e(t);if(!o.name||!o.icon)throw a({statusCode:400,statusMessage:"Thiếu thông tin bắt buộc: name, icon"});const i=await $fetch("/data/demo-menus.ts"),n={id:Math.max(...i.map(t=>t.id))+1,name:o.name.trim(),path:o.path?o.path.trim():"#",icon:o.icon.trim(),order:o.order||1,is_active:void 0===o.is_active||o.is_active,parent_id:o.parent_id||null,level:o.level||1,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};return i.push(n),{success:!0,message:"Thêm menu hệ thống thành công",data:n}}catch(t){if(t.statusCode)throw t;throw a({statusCode:500,statusMessage:"Lỗi khi thêm menu hệ thống mới"})}});export{o as default};
