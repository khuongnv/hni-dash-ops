import{c as t,g as e,r as s,e as a}from"../../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";const n=t(async t=>{try{const n=e(t,"id"),o=await s(t);if(!n||isNaN(Number(n)))throw a({statusCode:400,statusMessage:"ID menu không hợp lệ"});if(!o.name||!o.icon)throw a({statusCode:400,statusMessage:"Thiếu thông tin bắt buộc: name, icon"});const i=await $fetch("/data/demo-menus.ts"),r=i.findIndex(t=>t.id===parseInt(n));if(-1===r)throw a({statusCode:404,statusMessage:"Không tìm thấy menu"});const d={name:o.name.trim(),path:o.path?o.path.trim():"#",icon:o.icon.trim(),order:o.order||i[r].order,is_active:void 0!==o.is_active?o.is_active:i[r].is_active,parent_id:o.parent_id||i[r].parent_id,level:o.level||i[r].level,updated_at:(new Date).toISOString()};return i[r]={...i[r],...d},{success:!0,data:i[r],message:"Cập nhật menu thành công"}}catch(t){if(t.statusCode)throw t;throw a({statusCode:500,statusMessage:"Lỗi khi cập nhật menu"})}});export{n as default};
