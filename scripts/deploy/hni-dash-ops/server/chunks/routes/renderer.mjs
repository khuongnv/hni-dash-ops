import{createRenderer as e,getRequestDependencies as t,getPreloadLinks as n,getPrefetchLinks as r}from"vue-bundle-renderer/runtime";import{j as o,u as s,h as a,f as i,e as l,i as d,k as u,l as c,m as p,b as h,n as f,o as m}from"../_/nitro.mjs";import{renderToString as b}from"vue/server-renderer";import{createHead as y,propsToString as g,renderSSRHead as w}from"unhead/server";import{stringify as _,uneval as v}from"devalue";import{walkResolver as R}from"unhead/utils";import{toValue as x,isRef as A,hasInjectionContext as C,inject as S,ref as T,watchEffect as j,getCurrentInstance as L,onBeforeUnmount as U,onDeactivated as k,onActivated as P}from"vue";import{DeprecationsPlugin as H,PromisesPlugin as $,TemplateParamsPlugin as N,AliasSortingPlugin as O}from"unhead/plugins";const VueResolver=(e,t)=>A(t)?x(t):t,z="usehead";function useHead(e,t={}){const n=t.head||function(){if(C()){const e=S(z);if(!e)throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.");return e}throw new Error("useHead() was called without provide context, ensure you call it through the setup() function.")}();return n.ssr?n.push(e||{},t):function(e,t,n={}){const r=T(!1);let o;j(()=>{const s=r.value?{}:R(t,VueResolver);o?o.patch(s):o=e.push(s,n)});L()&&(U(()=>{o.dispose()}),k(()=>{r.value=!0}),P(()=>{r.value=!1}));return o}(n,e,t)}function createHead(e={}){const t=y({...e,propResolvers:[VueResolver]});return t.install=function(e){return{install(t){t.config.globalProperties.$unhead=e,t.config.globalProperties.$head=e,t.provide(z,e)}}.install}(t),t}const M={meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1"},{name:"description",content:"Internal dashboard for HNI operations"},{name:"theme-color",content:"#1e40af"},{name:"robots",content:"noindex, nofollow"}],link:[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""}],style:[],script:[],noscript:[],title:"HNI Dashboard Operations"},D={id:"teleports"};function baseURL(){return s().app.baseURL}function buildAssetsURL(...e){return o(publicAssetsURL(),s().app.buildAssetsDir,...e)}function publicAssetsURL(...e){const t=s().app,n=t.cdnURL||t.baseURL;return e.length?o(n,...e):n}const E=`<div${g({id:"__nuxt"})}>`,I="</div>",getClientManifest=()=>import("../build/client.manifest.mjs").then(e=>e.default||e).then(e=>"function"==typeof e?e():e),F=lazyCachedFunction(async()=>{const t=await getClientManifest();if(!t)throw new Error("client.manifest is not available");const n=await import("../build/server.mjs").then(e=>e.default||e);if(!n)throw new Error("Server bundle is not available");return e(n,{manifest:t,renderToString:async function(e,t){const n=await b(e,t);return E+n+I},buildAssetsURL:buildAssetsURL})}),J=lazyCachedFunction(async()=>{const t=await getClientManifest(),n=await import("../virtual/_virtual_spa-template.mjs").then(e=>e.template).catch(()=>"").then(e=>E+e+I),r=e(()=>()=>{},{manifest:t,renderToString:()=>n,buildAssetsURL:buildAssetsURL}),o=await r.renderToString({});return{rendererContext:r.rendererContext,renderToString:e=>{const t=s(e.event);return e.modules||=new Set,e.payload.serverRendered=!1,e.config={public:t.public,app:t.app},Promise.resolve(o)}}});function lazyCachedFunction(e){let t=null;return()=>(null===t&&(t=e().catch(e=>{throw t=null,e})),t)}function renderPayloadJsonScript(e){const t={type:"application/json",innerHTML:e.data?_(e.data,e.ssrContext._payloadReducers):"","data-nuxt-data":"nuxt-app","data-ssr":!e.ssrContext.noSSR,id:"__NUXT_DATA__"};e.src&&(t["data-src"]=e.src);return[t,{innerHTML:`window.__NUXT__={};window.__NUXT__.config=${v(e.ssrContext.config)}`}]}const B={disableDefaults:!0,disableCapoSorting:!1,plugins:[H,$,N,O]};const X={omitLineBreaks:!1};globalThis.__buildAssetsURL=buildAssetsURL,globalThis.__publicAssetsURL=publicAssetsURL;const q=!!D.id,W=q?`<div${g(D)}>`:"",Y=q?"</div>":"";let G;const K=a(async e=>{const o=h(),a=e.path.startsWith("/__nuxt_error")?i(e):null;if(a&&!("__unenv__"in e.node.req))throw l({statusCode:404,statusMessage:"Page Not Found: /__nuxt_error"});const b=function(e){return{url:e.path,event:e,runtimeConfig:s(e),noSSR:e.context.nuxt?.noSSR||!1,head:createHead(B),error:!1,nuxt:void 0,payload:{},_payloadReducers:Object.create(null),modules:new Set}}(e),y={mode:"server"};b.head.push(M,y),a&&(a.statusCode&&=Number.parseInt(a.statusCode),function(e,t){e.error=!0,e.payload={error:t},e.url=t.url}(b,a));const g=d(e);!1===g.ssr&&(b.noSSR=!0);const _=await function(e){return e.noSSR?J():F()}(b),v=await _.renderToString(b).catch(async e=>{if(b._renderResponse&&"skipping render"===e.message)return{};const t=!a&&b.payload?.error||e;throw await(b.nuxt?.hooks.callHook("app:error",t)),t}),R=[];if(await(b.nuxt?.hooks.callHook("app:rendered",{ssrContext:b,renderResult:v})),b._renderResponse)return b._renderResponse;if(b.payload?.error&&!a)throw b.payload.error;const x=g.noScripts,{styles:A,scripts:C}=t(b,_.rendererContext);if(!x){let t=G;t||(t=buildAssetsURL("ByJo79wn.js"),/^(?:\/|\.+\/)/.test(t)||u(t,{acceptRelative:!0})?G=t:(t=c(e.path.replace(/\/[^/]+$/,"/"),p("/",t)),/^(?:\/|\.+\/)/.test(t)||(t=`./${t}`))),b.head.push({script:[{tagPosition:"head",tagPriority:-2,type:"importmap",innerHTML:JSON.stringify({imports:{"#entry":t}})}]},y)}b._preloadManifest&&!x&&b.head.push({link:[{rel:"preload",as:"fetch",fetchpriority:"low",crossorigin:"anonymous",href:buildAssetsURL(`builds/meta/${b.runtimeConfig.app.buildId}.json`)}]},{...y,tagPriority:"low"}),R.length&&b.head.push({style:R});const S=[];for(const e of Object.values(A))S.push({rel:"stylesheet",href:_.rendererContext.buildAssetsURL(e.file),crossorigin:""});if(S.length&&b.head.push({link:S},y),x||(b.head.push({link:n(b,_.rendererContext)},y),b.head.push({link:r(b,_.rendererContext)},y),b.head.push({script:renderPayloadJsonScript({ssrContext:b,data:b.payload})},{...y,tagPosition:"bodyClose",tagPriority:"high"})),!g.noScripts){const e="head";b.head.push({script:Object.values(C).map(t=>({type:t.module?"module":null,src:_.rendererContext.buildAssetsURL(t.file),defer:!t.module||null,tagPosition:e,crossorigin:""}))},y)}const{headTags:T,bodyTags:j,bodyTagsOpen:L,htmlAttrs:U,bodyAttrs:k}=await w(b.head,X),P={htmlAttrs:U?[U]:[],head:normalizeChunks([T]),bodyAttrs:k?[k]:[],bodyPrepend:normalizeChunks([L,b.teleports?.body]),body:[v.html,W+(q?joinTags([b.teleports?.[`#${D.id}`]]):"")+Y],bodyAppend:[j]};return await o.hooks.callHook("render:html",P,{event:e}),{body:(H=P,`<!DOCTYPE html><html${joinAttrs(H.htmlAttrs)}><head>${joinTags(H.head)}</head><body${joinAttrs(H.bodyAttrs)}>${joinTags(H.bodyPrepend)}${joinTags(H.body)}${joinTags(H.bodyAppend)}</body></html>`),statusCode:m(e),statusMessage:f(e),headers:{"content-type":"text/html;charset=utf-8","x-powered-by":"Nuxt"}};var H});function normalizeChunks(e){return e.filter(Boolean).map(e=>e.trim())}function joinTags(e){return e.join("")}function joinAttrs(e){return 0===e.length?"":" "+e.join(" ")}const Q=Object.freeze(Object.defineProperty({__proto__:null,default:K},Symbol.toStringTag,{value:"Module"}));export{baseURL as b,z as h,Q as r,useHead as u};
