import{defineComponent as e,ref as a,computed as l,watch as t,mergeProps as s,withCtx as n,unref as i,createVNode as u,createTextVNode as r,toDisplayString as d,createBlock as o,openBlock as c,Fragment as f,renderList as v,createCommentVNode as m,useSSRContext as g}from"vue";import{ssrRenderAttrs as p,ssrRenderComponent as _,ssrRenderAttr as x,ssrIncludeBooleanAttr as y,ssrLooseContain as h,ssrLooseEqual as k,ssrInterpolate as b,ssrRenderList as w}from"vue/server-renderer";import{_ as C}from"./Button-C4ZWmsC_.mjs";import{_ as $,a as T,b as j,c as A}from"./CardContent-B5Mf_SVJ.mjs";import{_ as z,a as H,b as E,c as P,d as S,e as K}from"./TableRow-ukuzC_Dy.mjs";import{_ as D}from"./Badge-DfRucjjx.mjs";import{_ as N}from"./Label-DTP1ztuh.mjs";import{_ as M}from"./PageHeader-B5d1DVEu.mjs";import{u as V}from"./useErrorHandler-y_M1hPJN.mjs";import{u as B}from"./useAPI-Bps8bvAQ.mjs";import{u as X}from"./useDepartments-B7_X4Fn2.mjs";import{u as I}from"./useCategories-ig7z67MD.mjs";import{P as L,a as U}from"./plus-ZseF0iYE.mjs";import{T as q}from"./trash-2-Cb5c2PkA.mjs";import"class-variance-authority";import"./utils-H80jjgLf.mjs";import"clsx";import"tailwind-merge";import"./nuxt-link-DTyZRdIe.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";import"./server.mjs";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";import"unhead/plugins";import"vue-router";import"./chevron-right-Cq_K5LWB.mjs";import"./createLucideIcon-DpBqMQLu.mjs";const Q=e({__name:"users",__ssrInlineRender:!0,setup(e){const{getUsers:g,deleteUser:Q}=(()=>{const{handleAsyncError:e}=V(),{get:a,post:l,put:t,delete:s}=B();return{getUsers:async(l=1,t=10,s="",n="")=>await e(async()=>{const e={page:l,limit:t};return s&&(e.search=s),n&&(e.status=n),await a("/api/users",e)},"Lấy danh sách người dùng"),getUserById:async l=>await e(async()=>await a(`/api/users/${l}`),"Lấy thông tin người dùng"),createUser:async a=>await e(async()=>await l("/api/users",a),"Tạo người dùng"),updateUser:async(a,l)=>await e(async()=>await t(`/api/users/${a}`,l),"Cập nhật người dùng"),deleteUser:async a=>await e(async()=>{await s(`/api/users/${a}`)},"Xóa người dùng")}})(),{getDepartments:R}=X(),{getCategories:Z}=I(),F=a([]),G=a([]),J=a([]),W=a([]),Y=a([]),O=a(!1),ee=a(!1),ae=a(!1),le=a(!1),te=a(""),se=a("all"),ne=a(1),ie=a(10),ue=a({page:1,limit:10,total:0,totalPages:0}),re=a({id:null,full_name:"",username:"",password:"",email:"",department_id:null,role_id:null,position_id:null,gender_id:null,dob:"",status:"active"}),de=l(()=>({start:(ue.value.page-1)*ue.value.limit+1,end:Math.min(ue.value.page*ue.value.limit,ue.value.total),total:ue.value.total})),loadData=async()=>{O.value=!0;try{const[e,a,l]=await Promise.all([g(ne.value,ie.value,te.value.trim(),se.value),R(),Z()]);F.value=e.data,ue.value=e.pagination,G.value=a,J.value=l.filter(e=>11===e.parent_id),W.value=l.filter(e=>16===e.parent_id),Y.value=l.filter(e=>17===e.parent_id)}catch(e){console.error("Error loading data:",e)}finally{O.value=!1}},changePage=async e=>{ne.value=e,await loadData()},changePageSize=async e=>{ie.value=e,ne.value=1,await loadData()};let oe=null;t(te,()=>{oe&&clearTimeout(oe),oe=setTimeout(async()=>{ne.value=1,await loadData()},500)}),t(se,async()=>{ne.value=1,await loadData()});const getVisiblePages=()=>{const e=ue.value.totalPages,a=ne.value,l=[];if(e<=7)for(let a=1;a<=e;a++)l.push(a);else{l.push(1),a>4&&l.push("...");const t=Math.max(2,a-1),s=Math.min(e-1,a+1);for(let a=t;a<=s;a++)1!==a&&a!==e&&l.push(a);a<e-3&&l.push("..."),e>1&&l.push(e)}return l},resetForm=()=>{re.value={id:null,full_name:"",username:"",password:"",email:"",department_id:null,role_id:null,position_id:null,gender_id:null,dob:"",status:"active"}},openCreateModal=()=>{resetForm(),ae.value=!1,ee.value=!0},openEditModal=e=>{re.value={id:e.id,full_name:e.full_name,username:e.username,password:"",email:e.email,department_id:e.department_id||null,role_id:e.role_id||null,position_id:e.position_id||null,gender_id:e.gender_id||null,dob:e.dob||"",status:e.status},ae.value=!0,ee.value=!0},closeModal=()=>{ee.value=!1,resetForm()},confirmDelete=async e=>{if(confirm(`Bạn có chắc chắn muốn xóa người dùng "${e.full_name}"?`))try{await Q(e.id),await loadData()}catch(e){console.error("Error deleting user:",e),alert("Có lỗi xảy ra khi xóa người dùng")}};return(e,a,l,t)=>{a(`<div${p(s({class:"space-y-4"},t))}>`),a(_(M,{title:"Quản lý Người dùng",description:"Quản lý thông tin người dùng trong hệ thống"},null,l)),a(`<div class="flex flex-col sm:flex-row gap-3"><div class="flex-1"><input${x("value",te.value)} type="text" placeholder="Tìm kiếm người dùng..." class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></div><div class="flex gap-3"><select class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"><option value="all"${y(Array.isArray(se.value)?h(se.value,"all"):k(se.value,"all"))?" selected":""}>Tất cả trạng thái</option><option value="active"${y(Array.isArray(se.value)?h(se.value,"active"):k(se.value,"active"))?" selected":""}>Hoạt động</option><option value="inactive"${y(Array.isArray(se.value)?h(se.value,"inactive"):k(se.value,"inactive"))?" selected":""}>Không hoạt động</option></select>`),a(_(C,{onClick:openCreateModal,class:"flex items-center gap-2"},{default:n((e,a,l,t)=>{if(!a)return[u(i(L),{class:"w-4 h-4"}),r(" Thêm người dùng ")];a(_(i(L),{class:"w-4 h-4"},null,l,t)),a(" Thêm người dùng ")}),_:1},l)),a("</div></div>"),a(_($,{class:"-mt-2"},{default:n((e,a,l,t)=>{if(!a)return[u(T,null,{default:n(()=>[u("div",{class:"flex justify-between items-start"},[u("div",null,[u(j,null,{default:n(()=>[r("Danh sách Người dùng")]),_:1})]),u("div",{class:"text-sm text-gray-600"}," Tổng số bản ghi: "+d(de.value.total),1)])]),_:1}),u(A,null,{default:n(()=>[O.value?(c(),o("div",{key:0,class:"text-center py-8"},[u("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),u("p",{class:"mt-2 text-gray-600"},"Đang tải...")])):0===F.value.length?(c(),o("div",{key:1,class:"text-center py-8"},[u("p",{class:"text-gray-600"},"Không có người dùng nào")])):(c(),o("div",{key:2},[u(z,null,{default:n(()=>[u(H,null,{default:n(()=>[u(E,null,{default:n(()=>[u(P,null,{default:n(()=>[r("Họ tên")]),_:1}),u(P,null,{default:n(()=>[r("Tên đăng nhập")]),_:1}),u(P,null,{default:n(()=>[r("Email")]),_:1}),u(P,null,{default:n(()=>[r("Đơn vị")]),_:1}),u(P,null,{default:n(()=>[r("Vai trò")]),_:1}),u(P,null,{default:n(()=>[r("Chức vụ")]),_:1}),u(P,null,{default:n(()=>[r("Trạng thái")]),_:1}),u(P,{class:"text-right"},{default:n(()=>[r("Thao tác")]),_:1})]),_:1})]),_:1}),u(S,null,{default:n(()=>[(c(!0),o(f,null,v(F.value,e=>(c(),o(E,{key:e.id,class:"table-row-fixed"},{default:n(()=>[u(K,{class:"align-middle"},{default:n(()=>[u("div",{class:"font-medium text-foreground"},d(e.full_name),1)]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[r(d(e.username),1)]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[r(d(e.email),1)]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[e.department?(c(),o(D,{key:0,variant:"outline",class:"text-xs"},{default:n(()=>[r(d(e.department.name),1)]),_:2},1024)):(c(),o("span",{key:1,class:"text-gray-500"},"-"))]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[e.role?(c(),o(D,{key:0,variant:"outline",class:"text-xs"},{default:n(()=>[r(d(e.role.name),1)]),_:2},1024)):(c(),o("span",{key:1,class:"text-gray-500"},"-"))]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[e.position?(c(),o(D,{key:0,variant:"outline",class:"text-xs"},{default:n(()=>[r(d(e.position.name),1)]),_:2},1024)):(c(),o("span",{key:1,class:"text-gray-500"},"-"))]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[u(D,{variant:"active"===e.status?"default":"secondary",class:"text-xs"},{default:n(()=>[r(d("active"===e.status?"Hoạt động":"Không hoạt động"),1)]),_:2},1032,["variant"])]),_:2},1024),u(K,{class:"align-middle text-right"},{default:n(()=>[u("div",{class:"flex justify-end gap-2"},[u(C,{variant:"outline",size:"sm",onClick:a=>openEditModal(e),class:"flex items-center gap-1"},{default:n(()=>[u(i(U),{class:"w-3 h-3"}),r(" Sửa ")]),_:1},8,["onClick"]),u(C,{variant:"outline",size:"sm",onClick:a=>confirmDelete(e),class:"flex items-center gap-1 text-red-600 hover:text-red-700"},{default:n(()=>[u(i(q),{class:"w-3 h-3"}),r(" Xóa ")]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),ue.value.totalPages>1?(c(),o("div",{key:0,class:"flex items-center justify-between mt-6"},[u("div",{class:"flex items-center gap-2"},[u("span",{class:"text-sm text-gray-600"},"Hiển thị:"),u("select",{value:ie.value,onChange:e=>changePageSize(parseInt(e.target.value)),class:"px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},[u("option",{value:"5"},"5"),u("option",{value:"10"},"10"),u("option",{value:"20"},"20"),u("option",{value:"50"},"50")],40,["value","onChange"]),u("span",{class:"text-sm text-gray-600"},"bản ghi/trang")]),u("div",{class:"flex items-center gap-2"},[u(C,{variant:"outline",size:"sm",disabled:ne.value<=1,onClick:e=>changePage(ne.value-1)},{default:n(()=>[r(" Trước ")]),_:1},8,["disabled","onClick"]),u("div",{class:"flex items-center gap-1"},[(c(!0),o(f,null,v(getVisiblePages(),e=>(c(),o(f,{key:e},["..."!==e?(c(),o(C,{key:0,variant:e===ne.value?"default":"outline",size:"sm",onClick:a=>changePage(e),class:"w-8 h-8 p-0"},{default:n(()=>[r(d(e),1)]),_:2},1032,["variant","onClick"])):(c(),o("span",{key:1,class:"px-2 text-gray-500"},"..."))],64))),128))]),u(C,{variant:"outline",size:"sm",disabled:ne.value>=ue.value.totalPages,onClick:e=>changePage(ne.value+1)},{default:n(()=>[r(" Sau ")]),_:1},8,["disabled","onClick"])])])):m("",!0)]))]),_:1})];a(_(T,null,{default:n((e,a,l,t)=>{if(!a)return[u("div",{class:"flex justify-between items-start"},[u("div",null,[u(j,null,{default:n(()=>[r("Danh sách Người dùng")]),_:1})]),u("div",{class:"text-sm text-gray-600"}," Tổng số bản ghi: "+d(de.value.total),1)])];a(`<div class="flex justify-between items-start"${t}><div${t}>`),a(_(j,null,{default:n((e,a,l,t)=>{if(!a)return[r("Danh sách Người dùng")];a("Danh sách Người dùng")}),_:1},l,t)),a(`</div><div class="text-sm text-gray-600"${t}> Tổng số bản ghi: ${b(de.value.total)}</div></div>`)}),_:1},l,t)),a(_(A,null,{default:n((e,a,l,t)=>{if(!a)return[O.value?(c(),o("div",{key:0,class:"text-center py-8"},[u("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),u("p",{class:"mt-2 text-gray-600"},"Đang tải...")])):0===F.value.length?(c(),o("div",{key:1,class:"text-center py-8"},[u("p",{class:"text-gray-600"},"Không có người dùng nào")])):(c(),o("div",{key:2},[u(z,null,{default:n(()=>[u(H,null,{default:n(()=>[u(E,null,{default:n(()=>[u(P,null,{default:n(()=>[r("Họ tên")]),_:1}),u(P,null,{default:n(()=>[r("Tên đăng nhập")]),_:1}),u(P,null,{default:n(()=>[r("Email")]),_:1}),u(P,null,{default:n(()=>[r("Đơn vị")]),_:1}),u(P,null,{default:n(()=>[r("Vai trò")]),_:1}),u(P,null,{default:n(()=>[r("Chức vụ")]),_:1}),u(P,null,{default:n(()=>[r("Trạng thái")]),_:1}),u(P,{class:"text-right"},{default:n(()=>[r("Thao tác")]),_:1})]),_:1})]),_:1}),u(S,null,{default:n(()=>[(c(!0),o(f,null,v(F.value,e=>(c(),o(E,{key:e.id,class:"table-row-fixed"},{default:n(()=>[u(K,{class:"align-middle"},{default:n(()=>[u("div",{class:"font-medium text-foreground"},d(e.full_name),1)]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[r(d(e.username),1)]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[r(d(e.email),1)]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[e.department?(c(),o(D,{key:0,variant:"outline",class:"text-xs"},{default:n(()=>[r(d(e.department.name),1)]),_:2},1024)):(c(),o("span",{key:1,class:"text-gray-500"},"-"))]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[e.role?(c(),o(D,{key:0,variant:"outline",class:"text-xs"},{default:n(()=>[r(d(e.role.name),1)]),_:2},1024)):(c(),o("span",{key:1,class:"text-gray-500"},"-"))]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[e.position?(c(),o(D,{key:0,variant:"outline",class:"text-xs"},{default:n(()=>[r(d(e.position.name),1)]),_:2},1024)):(c(),o("span",{key:1,class:"text-gray-500"},"-"))]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[u(D,{variant:"active"===e.status?"default":"secondary",class:"text-xs"},{default:n(()=>[r(d("active"===e.status?"Hoạt động":"Không hoạt động"),1)]),_:2},1032,["variant"])]),_:2},1024),u(K,{class:"align-middle text-right"},{default:n(()=>[u("div",{class:"flex justify-end gap-2"},[u(C,{variant:"outline",size:"sm",onClick:a=>openEditModal(e),class:"flex items-center gap-1"},{default:n(()=>[u(i(U),{class:"w-3 h-3"}),r(" Sửa ")]),_:1},8,["onClick"]),u(C,{variant:"outline",size:"sm",onClick:a=>confirmDelete(e),class:"flex items-center gap-1 text-red-600 hover:text-red-700"},{default:n(()=>[u(i(q),{class:"w-3 h-3"}),r(" Xóa ")]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),ue.value.totalPages>1?(c(),o("div",{key:0,class:"flex items-center justify-between mt-6"},[u("div",{class:"flex items-center gap-2"},[u("span",{class:"text-sm text-gray-600"},"Hiển thị:"),u("select",{value:ie.value,onChange:e=>changePageSize(parseInt(e.target.value)),class:"px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"},[u("option",{value:"5"},"5"),u("option",{value:"10"},"10"),u("option",{value:"20"},"20"),u("option",{value:"50"},"50")],40,["value","onChange"]),u("span",{class:"text-sm text-gray-600"},"bản ghi/trang")]),u("div",{class:"flex items-center gap-2"},[u(C,{variant:"outline",size:"sm",disabled:ne.value<=1,onClick:e=>changePage(ne.value-1)},{default:n(()=>[r(" Trước ")]),_:1},8,["disabled","onClick"]),u("div",{class:"flex items-center gap-1"},[(c(!0),o(f,null,v(getVisiblePages(),e=>(c(),o(f,{key:e},["..."!==e?(c(),o(C,{key:0,variant:e===ne.value?"default":"outline",size:"sm",onClick:a=>changePage(e),class:"w-8 h-8 p-0"},{default:n(()=>[r(d(e),1)]),_:2},1032,["variant","onClick"])):(c(),o("span",{key:1,class:"px-2 text-gray-500"},"..."))],64))),128))]),u(C,{variant:"outline",size:"sm",disabled:ne.value>=ue.value.totalPages,onClick:e=>changePage(ne.value+1)},{default:n(()=>[r(" Sau ")]),_:1},8,["disabled","onClick"])])])):m("",!0)]))];O.value?a(`<div class="text-center py-8"${t}><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"${t}></div><p class="mt-2 text-gray-600"${t}>Đang tải...</p></div>`):0===F.value.length?a(`<div class="text-center py-8"${t}><p class="text-gray-600"${t}>Không có người dùng nào</p></div>`):(a(`<div${t}>`),a(_(z,null,{default:n((e,a,l,t)=>{if(!a)return[u(H,null,{default:n(()=>[u(E,null,{default:n(()=>[u(P,null,{default:n(()=>[r("Họ tên")]),_:1}),u(P,null,{default:n(()=>[r("Tên đăng nhập")]),_:1}),u(P,null,{default:n(()=>[r("Email")]),_:1}),u(P,null,{default:n(()=>[r("Đơn vị")]),_:1}),u(P,null,{default:n(()=>[r("Vai trò")]),_:1}),u(P,null,{default:n(()=>[r("Chức vụ")]),_:1}),u(P,null,{default:n(()=>[r("Trạng thái")]),_:1}),u(P,{class:"text-right"},{default:n(()=>[r("Thao tác")]),_:1})]),_:1})]),_:1}),u(S,null,{default:n(()=>[(c(!0),o(f,null,v(F.value,e=>(c(),o(E,{key:e.id,class:"table-row-fixed"},{default:n(()=>[u(K,{class:"align-middle"},{default:n(()=>[u("div",{class:"font-medium text-foreground"},d(e.full_name),1)]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[r(d(e.username),1)]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[r(d(e.email),1)]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[e.department?(c(),o(D,{key:0,variant:"outline",class:"text-xs"},{default:n(()=>[r(d(e.department.name),1)]),_:2},1024)):(c(),o("span",{key:1,class:"text-gray-500"},"-"))]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[e.role?(c(),o(D,{key:0,variant:"outline",class:"text-xs"},{default:n(()=>[r(d(e.role.name),1)]),_:2},1024)):(c(),o("span",{key:1,class:"text-gray-500"},"-"))]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[e.position?(c(),o(D,{key:0,variant:"outline",class:"text-xs"},{default:n(()=>[r(d(e.position.name),1)]),_:2},1024)):(c(),o("span",{key:1,class:"text-gray-500"},"-"))]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[u(D,{variant:"active"===e.status?"default":"secondary",class:"text-xs"},{default:n(()=>[r(d("active"===e.status?"Hoạt động":"Không hoạt động"),1)]),_:2},1032,["variant"])]),_:2},1024),u(K,{class:"align-middle text-right"},{default:n(()=>[u("div",{class:"flex justify-end gap-2"},[u(C,{variant:"outline",size:"sm",onClick:a=>openEditModal(e),class:"flex items-center gap-1"},{default:n(()=>[u(i(U),{class:"w-3 h-3"}),r(" Sửa ")]),_:1},8,["onClick"]),u(C,{variant:"outline",size:"sm",onClick:a=>confirmDelete(e),class:"flex items-center gap-1 text-red-600 hover:text-red-700"},{default:n(()=>[u(i(q),{class:"w-3 h-3"}),r(" Xóa ")]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})];a(_(H,null,{default:n((e,a,l,t)=>{if(!a)return[u(E,null,{default:n(()=>[u(P,null,{default:n(()=>[r("Họ tên")]),_:1}),u(P,null,{default:n(()=>[r("Tên đăng nhập")]),_:1}),u(P,null,{default:n(()=>[r("Email")]),_:1}),u(P,null,{default:n(()=>[r("Đơn vị")]),_:1}),u(P,null,{default:n(()=>[r("Vai trò")]),_:1}),u(P,null,{default:n(()=>[r("Chức vụ")]),_:1}),u(P,null,{default:n(()=>[r("Trạng thái")]),_:1}),u(P,{class:"text-right"},{default:n(()=>[r("Thao tác")]),_:1})]),_:1})];a(_(E,null,{default:n((e,a,l,t)=>{if(!a)return[u(P,null,{default:n(()=>[r("Họ tên")]),_:1}),u(P,null,{default:n(()=>[r("Tên đăng nhập")]),_:1}),u(P,null,{default:n(()=>[r("Email")]),_:1}),u(P,null,{default:n(()=>[r("Đơn vị")]),_:1}),u(P,null,{default:n(()=>[r("Vai trò")]),_:1}),u(P,null,{default:n(()=>[r("Chức vụ")]),_:1}),u(P,null,{default:n(()=>[r("Trạng thái")]),_:1}),u(P,{class:"text-right"},{default:n(()=>[r("Thao tác")]),_:1})];a(_(P,null,{default:n((e,a,l,t)=>{if(!a)return[r("Họ tên")];a("Họ tên")}),_:1},l,t)),a(_(P,null,{default:n((e,a,l,t)=>{if(!a)return[r("Tên đăng nhập")];a("Tên đăng nhập")}),_:1},l,t)),a(_(P,null,{default:n((e,a,l,t)=>{if(!a)return[r("Email")];a("Email")}),_:1},l,t)),a(_(P,null,{default:n((e,a,l,t)=>{if(!a)return[r("Đơn vị")];a("Đơn vị")}),_:1},l,t)),a(_(P,null,{default:n((e,a,l,t)=>{if(!a)return[r("Vai trò")];a("Vai trò")}),_:1},l,t)),a(_(P,null,{default:n((e,a,l,t)=>{if(!a)return[r("Chức vụ")];a("Chức vụ")}),_:1},l,t)),a(_(P,null,{default:n((e,a,l,t)=>{if(!a)return[r("Trạng thái")];a("Trạng thái")}),_:1},l,t)),a(_(P,{class:"text-right"},{default:n((e,a,l,t)=>{if(!a)return[r("Thao tác")];a("Thao tác")}),_:1},l,t))}),_:1},l,t))}),_:1},l,t)),a(_(S,null,{default:n((e,a,l,t)=>{if(!a)return[(c(!0),o(f,null,v(F.value,e=>(c(),o(E,{key:e.id,class:"table-row-fixed"},{default:n(()=>[u(K,{class:"align-middle"},{default:n(()=>[u("div",{class:"font-medium text-foreground"},d(e.full_name),1)]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[r(d(e.username),1)]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[r(d(e.email),1)]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[e.department?(c(),o(D,{key:0,variant:"outline",class:"text-xs"},{default:n(()=>[r(d(e.department.name),1)]),_:2},1024)):(c(),o("span",{key:1,class:"text-gray-500"},"-"))]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[e.role?(c(),o(D,{key:0,variant:"outline",class:"text-xs"},{default:n(()=>[r(d(e.role.name),1)]),_:2},1024)):(c(),o("span",{key:1,class:"text-gray-500"},"-"))]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[e.position?(c(),o(D,{key:0,variant:"outline",class:"text-xs"},{default:n(()=>[r(d(e.position.name),1)]),_:2},1024)):(c(),o("span",{key:1,class:"text-gray-500"},"-"))]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[u(D,{variant:"active"===e.status?"default":"secondary",class:"text-xs"},{default:n(()=>[r(d("active"===e.status?"Hoạt động":"Không hoạt động"),1)]),_:2},1032,["variant"])]),_:2},1024),u(K,{class:"align-middle text-right"},{default:n(()=>[u("div",{class:"flex justify-end gap-2"},[u(C,{variant:"outline",size:"sm",onClick:a=>openEditModal(e),class:"flex items-center gap-1"},{default:n(()=>[u(i(U),{class:"w-3 h-3"}),r(" Sửa ")]),_:1},8,["onClick"]),u(C,{variant:"outline",size:"sm",onClick:a=>confirmDelete(e),class:"flex items-center gap-1 text-red-600 hover:text-red-700"},{default:n(()=>[u(i(q),{class:"w-3 h-3"}),r(" Xóa ")]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))];a("\x3c!--[--\x3e"),w(F.value,e=>{a(_(E,{key:e.id,class:"table-row-fixed"},{default:n((a,l,t,s)=>{if(!l)return[u(K,{class:"align-middle"},{default:n(()=>[u("div",{class:"font-medium text-foreground"},d(e.full_name),1)]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[r(d(e.username),1)]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[r(d(e.email),1)]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[e.department?(c(),o(D,{key:0,variant:"outline",class:"text-xs"},{default:n(()=>[r(d(e.department.name),1)]),_:2},1024)):(c(),o("span",{key:1,class:"text-gray-500"},"-"))]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[e.role?(c(),o(D,{key:0,variant:"outline",class:"text-xs"},{default:n(()=>[r(d(e.role.name),1)]),_:2},1024)):(c(),o("span",{key:1,class:"text-gray-500"},"-"))]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[e.position?(c(),o(D,{key:0,variant:"outline",class:"text-xs"},{default:n(()=>[r(d(e.position.name),1)]),_:2},1024)):(c(),o("span",{key:1,class:"text-gray-500"},"-"))]),_:2},1024),u(K,{class:"align-middle"},{default:n(()=>[u(D,{variant:"active"===e.status?"default":"secondary",class:"text-xs"},{default:n(()=>[r(d("active"===e.status?"Hoạt động":"Không hoạt động"),1)]),_:2},1032,["variant"])]),_:2},1024),u(K,{class:"align-middle text-right"},{default:n(()=>[u("div",{class:"flex justify-end gap-2"},[u(C,{variant:"outline",size:"sm",onClick:a=>openEditModal(e),class:"flex items-center gap-1"},{default:n(()=>[u(i(U),{class:"w-3 h-3"}),r(" Sửa ")]),_:1},8,["onClick"]),u(C,{variant:"outline",size:"sm",onClick:a=>confirmDelete(e),class:"flex items-center gap-1 text-red-600 hover:text-red-700"},{default:n(()=>[u(i(q),{class:"w-3 h-3"}),r(" Xóa ")]),_:1},8,["onClick"])])]),_:2},1024)];l(_(K,{class:"align-middle"},{default:n((a,l,t,s)=>{if(!l)return[u("div",{class:"font-medium text-foreground"},d(e.full_name),1)];l(`<div class="font-medium text-foreground"${s}>${b(e.full_name)}</div>`)}),_:2},t,s)),l(_(K,{class:"align-middle"},{default:n((a,l,t,s)=>{if(!l)return[r(d(e.username),1)];l(`${b(e.username)}`)}),_:2},t,s)),l(_(K,{class:"align-middle"},{default:n((a,l,t,s)=>{if(!l)return[r(d(e.email),1)];l(`${b(e.email)}`)}),_:2},t,s)),l(_(K,{class:"align-middle"},{default:n((a,l,t,s)=>{if(!l)return[e.department?(c(),o(D,{key:0,variant:"outline",class:"text-xs"},{default:n(()=>[r(d(e.department.name),1)]),_:2},1024)):(c(),o("span",{key:1,class:"text-gray-500"},"-"))];e.department?l(_(D,{variant:"outline",class:"text-xs"},{default:n((a,l,t,s)=>{if(!l)return[r(d(e.department.name),1)];l(`${b(e.department.name)}`)}),_:2},t,s)):l(`<span class="text-gray-500"${s}>-</span>`)}),_:2},t,s)),l(_(K,{class:"align-middle"},{default:n((a,l,t,s)=>{if(!l)return[e.role?(c(),o(D,{key:0,variant:"outline",class:"text-xs"},{default:n(()=>[r(d(e.role.name),1)]),_:2},1024)):(c(),o("span",{key:1,class:"text-gray-500"},"-"))];e.role?l(_(D,{variant:"outline",class:"text-xs"},{default:n((a,l,t,s)=>{if(!l)return[r(d(e.role.name),1)];l(`${b(e.role.name)}`)}),_:2},t,s)):l(`<span class="text-gray-500"${s}>-</span>`)}),_:2},t,s)),l(_(K,{class:"align-middle"},{default:n((a,l,t,s)=>{if(!l)return[e.position?(c(),o(D,{key:0,variant:"outline",class:"text-xs"},{default:n(()=>[r(d(e.position.name),1)]),_:2},1024)):(c(),o("span",{key:1,class:"text-gray-500"},"-"))];e.position?l(_(D,{variant:"outline",class:"text-xs"},{default:n((a,l,t,s)=>{if(!l)return[r(d(e.position.name),1)];l(`${b(e.position.name)}`)}),_:2},t,s)):l(`<span class="text-gray-500"${s}>-</span>`)}),_:2},t,s)),l(_(K,{class:"align-middle"},{default:n((a,l,t,s)=>{if(!l)return[u(D,{variant:"active"===e.status?"default":"secondary",class:"text-xs"},{default:n(()=>[r(d("active"===e.status?"Hoạt động":"Không hoạt động"),1)]),_:2},1032,["variant"])];l(_(D,{variant:"active"===e.status?"default":"secondary",class:"text-xs"},{default:n((a,l,t,s)=>{if(!l)return[r(d("active"===e.status?"Hoạt động":"Không hoạt động"),1)];l(`${b("active"===e.status?"Hoạt động":"Không hoạt động")}`)}),_:2},t,s))}),_:2},t,s)),l(_(K,{class:"align-middle text-right"},{default:n((a,l,t,s)=>{if(!l)return[u("div",{class:"flex justify-end gap-2"},[u(C,{variant:"outline",size:"sm",onClick:a=>openEditModal(e),class:"flex items-center gap-1"},{default:n(()=>[u(i(U),{class:"w-3 h-3"}),r(" Sửa ")]),_:1},8,["onClick"]),u(C,{variant:"outline",size:"sm",onClick:a=>confirmDelete(e),class:"flex items-center gap-1 text-red-600 hover:text-red-700"},{default:n(()=>[u(i(q),{class:"w-3 h-3"}),r(" Xóa ")]),_:1},8,["onClick"])])];l(`<div class="flex justify-end gap-2"${s}>`),l(_(C,{variant:"outline",size:"sm",onClick:a=>openEditModal(e),class:"flex items-center gap-1"},{default:n((e,a,l,t)=>{if(!a)return[u(i(U),{class:"w-3 h-3"}),r(" Sửa ")];a(_(i(U),{class:"w-3 h-3"},null,l,t)),a(" Sửa ")}),_:2},t,s)),l(_(C,{variant:"outline",size:"sm",onClick:a=>confirmDelete(e),class:"flex items-center gap-1 text-red-600 hover:text-red-700"},{default:n((e,a,l,t)=>{if(!a)return[u(i(q),{class:"w-3 h-3"}),r(" Xóa ")];a(_(i(q),{class:"w-3 h-3"},null,l,t)),a(" Xóa ")}),_:2},t,s)),l("</div>")}),_:2},t,s))}),_:2},l,t))}),a("\x3c!--]--\x3e")}),_:1},l,t))}),_:1},l,t)),ue.value.totalPages>1?(a(`<div class="flex items-center justify-between mt-6"${t}><div class="flex items-center gap-2"${t}><span class="text-sm text-gray-600"${t}>Hiển thị:</span><select${x("value",ie.value)} class="px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"${t}><option value="5"${t}>5</option><option value="10"${t}>10</option><option value="20"${t}>20</option><option value="50"${t}>50</option></select><span class="text-sm text-gray-600"${t}>bản ghi/trang</span></div><div class="flex items-center gap-2"${t}>`),a(_(C,{variant:"outline",size:"sm",disabled:ne.value<=1,onClick:e=>changePage(ne.value-1)},{default:n((e,a,l,t)=>{if(!a)return[r(" Trước ")];a(" Trước ")}),_:1},l,t)),a(`<div class="flex items-center gap-1"${t}>\x3c!--[--\x3e`),w(getVisiblePages(),e=>{a("\x3c!--[--\x3e"),a("..."!==e?_(C,{variant:e===ne.value?"default":"outline",size:"sm",onClick:a=>changePage(e),class:"w-8 h-8 p-0"},{default:n((a,l,t,s)=>{if(!l)return[r(d(e),1)];l(`${b(e)}`)}),_:2},l,t):`<span class="px-2 text-gray-500"${t}>...</span>`),a("\x3c!--]--\x3e")}),a("\x3c!--]--\x3e</div>"),a(_(C,{variant:"outline",size:"sm",disabled:ne.value>=ue.value.totalPages,onClick:e=>changePage(ne.value+1)},{default:n((e,a,l,t)=>{if(!a)return[r(" Sau ")];a(" Sau ")}),_:1},l,t)),a("</div></div>")):a("\x3c!----\x3e"),a("</div>"))}),_:1},l,t))}),_:1},l)),ee.value?(a(`<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"><div class="bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto"><h3 class="text-lg font-semibold mb-4">${b(ae.value?"Sửa người dùng":"Thêm người dùng mới")}</h3><form class="space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div>`),a(_(N,{for:"full_name"},{default:n((e,a,l,t)=>{if(!a)return[r("Họ và tên *")];a("Họ và tên *")}),_:1},l)),a(`<input id="full_name"${x("value",re.value.full_name)} type="text" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Nhập họ và tên"></div><div>`),a(_(N,{for:"username"},{default:n((e,a,l,t)=>{if(!a)return[r("Tên đăng nhập *")];a("Tên đăng nhập *")}),_:1},l)),a(`<input id="username"${x("value",re.value.username)} type="text" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Nhập tên đăng nhập"></div><div>`),a(_(N,{for:"email"},{default:n((e,a,l,t)=>{if(!a)return[r("Email *")];a("Email *")}),_:1},l)),a(`<input id="email"${x("value",re.value.email)} type="email" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Nhập email"></div><div>`),a(_(N,{for:"password"},{default:n((e,a,l,t)=>{if(!a)return[r(d(ae.value?"Mật khẩu mới (để trống nếu không đổi)":"Mật khẩu *"),1)];a(`${b(ae.value?"Mật khẩu mới (để trống nếu không đổi)":"Mật khẩu *")}`)}),_:1},l)),a(`<input id="password"${x("value",re.value.password)} type="password"${y(!ae.value)?" required":""} class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Nhập mật khẩu"></div><div>`),a(_(N,{for:"department_id"},{default:n((e,a,l,t)=>{if(!a)return[r("Đơn vị")];a("Đơn vị")}),_:1},l)),a(`<select id="department_id" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"><option value=""${y(Array.isArray(re.value.department_id)?h(re.value.department_id,""):k(re.value.department_id,""))?" selected":""}>Chọn đơn vị</option>\x3c!--[--\x3e`),w(G.value,e=>{a(`<option${x("value",e.id)}${y(Array.isArray(re.value.department_id)?h(re.value.department_id,e.id):k(re.value.department_id,e.id))?" selected":""}>${b(e.name)}</option>`)}),a("\x3c!--]--\x3e</select></div><div>"),a(_(N,{for:"role_id"},{default:n((e,a,l,t)=>{if(!a)return[r("Vai trò")];a("Vai trò")}),_:1},l)),a(`<select id="role_id" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"><option value=""${y(Array.isArray(re.value.role_id)?h(re.value.role_id,""):k(re.value.role_id,""))?" selected":""}>Chọn vai trò</option>\x3c!--[--\x3e`),w(J.value,e=>{a(`<option${x("value",e.id)}${y(Array.isArray(re.value.role_id)?h(re.value.role_id,e.id):k(re.value.role_id,e.id))?" selected":""}>${b(e.name)}</option>`)}),a("\x3c!--]--\x3e</select></div><div>"),a(_(N,{for:"position_id"},{default:n((e,a,l,t)=>{if(!a)return[r("Chức vụ")];a("Chức vụ")}),_:1},l)),a(`<select id="position_id" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"><option value=""${y(Array.isArray(re.value.position_id)?h(re.value.position_id,""):k(re.value.position_id,""))?" selected":""}>Chọn chức vụ</option>\x3c!--[--\x3e`),w(W.value,e=>{a(`<option${x("value",e.id)}${y(Array.isArray(re.value.position_id)?h(re.value.position_id,e.id):k(re.value.position_id,e.id))?" selected":""}>${b(e.name)}</option>`)}),a("\x3c!--]--\x3e</select></div><div>"),a(_(N,{for:"gender_id"},{default:n((e,a,l,t)=>{if(!a)return[r("Giới tính")];a("Giới tính")}),_:1},l)),a(`<select id="gender_id" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"><option value=""${y(Array.isArray(re.value.gender_id)?h(re.value.gender_id,""):k(re.value.gender_id,""))?" selected":""}>Chọn giới tính</option>\x3c!--[--\x3e`),w(Y.value,e=>{a(`<option${x("value",e.id)}${y(Array.isArray(re.value.gender_id)?h(re.value.gender_id,e.id):k(re.value.gender_id,e.id))?" selected":""}>${b(e.name)}</option>`)}),a("\x3c!--]--\x3e</select></div><div>"),a(_(N,{for:"dob"},{default:n((e,a,l,t)=>{if(!a)return[r("Ngày sinh")];a("Ngày sinh")}),_:1},l)),a(`<input id="dob"${x("value",re.value.dob)} type="date" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></div><div>`),a(_(N,{for:"status"},{default:n((e,a,l,t)=>{if(!a)return[r("Trạng thái")];a("Trạng thái")}),_:1},l)),a(`<select id="status" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"><option value="active"${y(Array.isArray(re.value.status)?h(re.value.status,"active"):k(re.value.status,"active"))?" selected":""}>Hoạt động</option><option value="inactive"${y(Array.isArray(re.value.status)?h(re.value.status,"inactive"):k(re.value.status,"inactive"))?" selected":""}>Không hoạt động</option></select></div></div><div class="flex justify-end gap-3 pt-4">`),a(_(C,{type:"button",variant:"outline",onClick:closeModal},{default:n((e,a,l,t)=>{if(!a)return[r(" Hủy ")];a(" Hủy ")}),_:1},l)),a(_(C,{type:"submit",disabled:le.value},{default:n((e,a,l,t)=>{if(!a)return[r(d(le.value?"Đang xử lý...":ae.value?"Cập nhật":"Tạo mới"),1)];a(`${b(le.value?"Đang xử lý...":ae.value?"Cập nhật":"Tạo mới")}`)}),_:1},l)),a("</div></form></div></div>")):a("\x3c!----\x3e"),a("</div>")}}}),R=Q.setup;Q.setup=(e,a)=>{const l=g();return(l.modules||(l.modules=new Set)).add("pages/admin/users.vue"),R?R(e,a):void 0};export{Q as default};
