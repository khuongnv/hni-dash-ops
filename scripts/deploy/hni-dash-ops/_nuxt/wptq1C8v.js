import{g as u}from"#entry";const p=()=>{const a=u().public.apiBaseUrl||"http://localhost:64707",n=async(t,e={})=>{const r=`${a}${t}`;let o="";typeof window<"u"&&(o=localStorage.getItem("auth_token")||""),console.log("API Request:",{url:r,hasToken:!!o,token:o?`${o.substring(0,20)}...`:"none"});const c={headers:{"Content-Type":"application/json",...o&&{Authorization:`Bearer ${o}`},...e.headers}};try{const s=await $fetch(r,{...c,...e});if(s.Status==="Success")return s.Data;throw new Error(s.Message||"API call failed")}catch(s){throw console.error(`API Error for ${t}:`,s),console.error("Error details:",{status:s.status,statusText:s.statusText,data:s.data,message:s.message}),s}};return{get:async(t,e)=>{const r=e?new URLSearchParams(e).toString():"",o=r?`${t}?${r}`:t;return n(o,{method:"GET"})},post:async(t,e)=>n(t,{method:"POST",body:e?JSON.stringify(e):void 0}),put:async(t,e)=>n(t,{method:"PUT",body:e?JSON.stringify(e):void 0}),delete:async t=>n(t,{method:"DELETE"})}};export{p as u};
