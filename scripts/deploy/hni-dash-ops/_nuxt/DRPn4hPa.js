import{l as h,d as l,A as u,N as e,Z as w,Q as i,R as S,_ as c,$ as p,O as m,P as g,C as k,u as V,B as d,a0 as O}from"./CXrpKCn2.js";import{u as _}from"./DwjWO3-X.js";import{u as C}from"./fRJuXbyB.js";import{u as N}from"#entry";import"./BvMX9gl2.js";const T={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},M={class:"max-w-md w-full space-y-8"},j={class:"rounded-md shadow-sm -space-y-px"},B={key:0,class:"text-red-600 text-sm text-center"},L=["disabled"],q={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-3"},z=["disabled"],A={class:"absolute left-0 inset-y-0 flex items-center pl-3"},Q=h({__name:"login",setup(D){const{login:f}=_(),{redirectToSSO:v}=C(),b=N(),t=l({username:"",password:""}),r=l(!1),o=l(""),y=async()=>{if(!t.value.username||!t.value.password){o.value="Vui lòng nhập đầy đủ thông tin";return}r.value=!0,o.value="";try{await f(t.value.username,t.value.password)?await b.push("/main/dashboard"):o.value="Tên đăng nhập hoặc mật khẩu không đúng"}catch(n){console.error("Login error:",n),o.value=n.message||"Có lỗi xảy ra khi đăng nhập"}finally{r.value=!1}},x=()=>{r.value=!0,o.value="";try{v()}catch(n){console.error("SSO redirect error:",n),o.value="Có lỗi xảy ra khi chuyển hướng SSO",r.value=!1}};return(n,s)=>(d(),u("div",T,[e("div",M,[s[8]||(s[8]=e("div",null,[e("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Đăng nhập hệ thống "),e("p",{class:"mt-2 text-center text-sm text-gray-600"}," Sử dụng tài khoản của bạn để truy cập ")],-1)),e("form",{class:"mt-8 space-y-6",onSubmit:w(y,["prevent"])},[e("div",j,[e("div",null,[s[2]||(s[2]=e("label",{for:"username",class:"sr-only"},"Tên đăng nhập",-1)),c(e("input",{id:"username","onUpdate:modelValue":s[0]||(s[0]=a=>t.value.username=a),name:"username",type:"text",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Tên đăng nhập"},null,512),[[p,t.value.username]])]),e("div",null,[s[3]||(s[3]=e("label",{for:"password",class:"sr-only"},"Mật khẩu",-1)),c(e("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=a=>t.value.password=a),name:"password",type:"password",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Mật khẩu"},null,512),[[p,t.value.password]])])]),o.value?(d(),u("div",B,m(o.value),1)):i("",!0),e("div",null,[e("button",{type:"submit",disabled:r.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[r.value?(d(),u("span",q,[...s[4]||(s[4]=[e("div",{class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"},null,-1)])])):i("",!0),g(" "+m(r.value?"Đang đăng nhập...":"Đăng nhập"),1)],8,L)]),s[6]||(s[6]=S('<div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-gray-50 text-gray-500">Hoặc</span></div></div>',1)),e("div",null,[e("button",{type:"button",onClick:x,disabled:r.value,class:"group relative w-full flex justify-center py-2 px-4 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},[e("span",A,[k(V(O),{class:"h-4 w-4 text-gray-400 group-hover:text-gray-500"})]),s[5]||(s[5]=g(" Đăng nhập SSO ",-1))],8,z)]),s[7]||(s[7]=e("div",{class:"text-center"},[e("p",{class:"text-sm text-gray-600"}," Sử dụng tài khoản đã được tạo trong hệ thống ")],-1))],32)])]))}});export{Q as default};
