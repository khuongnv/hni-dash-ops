import{c as t,f as e,e as s}from"../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";const o=t(async t=>{try{const s=e(t),o=parseInt(s.page)||1,a=parseInt(s.limit)||10,r=s.search||"",n=s.status||"",i=await $fetch("/data/demo-users.ts");let l=i;r&&(l=i.filter(t=>{var e,s,o;return(null==(e=t.full_name)?void 0:e.toLowerCase().includes(r.toLowerCase()))||(null==(s=t.username)?void 0:s.toLowerCase().includes(r.toLowerCase()))||(null==(o=t.email)?void 0:o.toLowerCase().includes(r.toLowerCase()))})),n&&"all"!==n&&(l=l.filter(t=>t.status===n));const d=(o-1)*a;return{data:l.slice(d,d+a),pagination:{page:o,limit:a,total:l.length,totalPages:Math.ceil(l.length/a)}}}catch(t){throw s({statusCode:t.statusCode||500,statusMessage:t.statusMessage||"Lỗi khi lấy danh sách người dùng"})}});export{o as default};
