import{c as t,g as e,r as s,e as a}from"../../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";const n=t(async t=>{try{const n=e(t,"id"),o=await s(t);if(!n)throw a({statusCode:400,statusMessage:"ID department không hợp lệ"});if(!o.name||!o.code)throw a({statusCode:400,statusMessage:"Vui lòng điền đầy đủ thông tin bắt buộc"});const d=await $fetch("/data/demo-departments.ts"),r=d.findIndex(t=>t.id===parseInt(n));if(-1===r)throw a({statusCode:404,statusMessage:"Không tìm thấy department"});const i={code:o.code.trim(),name:o.name.trim(),parent_id:o.parent_id||d[r].parent_id,map_id:o.map_id||d[r].map_id,level:o.level||d[r].level,note:o.note||d[r].note,updated_at:(new Date).toISOString()};return d[r]={...d[r],...i},{success:!0,data:d[r],message:"Cập nhật department thành công"}}catch(t){throw a({statusCode:t.statusCode||500,statusMessage:t.statusMessage||"Lỗi khi cập nhật department"})}});export{n as default};
