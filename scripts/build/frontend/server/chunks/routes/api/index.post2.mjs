import{c as t,r as e,e as a}from"../../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";const o=t(async t=>{try{const o=await e(t);if(!o.name||!o.code)throw a({statusCode:400,statusMessage:"Vui lòng điền đầy đủ thông tin bắt buộc"});const n=await $fetch("/data/demo-departments.ts"),s={id:Math.max(...n.map(t=>t.id))+1,code:o.code.trim(),name:o.name.trim(),parent_id:o.parent_id||null,map_id:o.map_id||null,level:o.level||1,note:o.note||null,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};return n.push(s),{success:!0,data:s,message:"Tạo department thành công"}}catch(t){throw a({statusCode:t.statusCode||500,statusMessage:t.statusMessage||"Lỗi khi tạo department"})}});export{o as default};
